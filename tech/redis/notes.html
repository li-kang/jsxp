<!DOCTYPE html><html><head><meta charset="utf-8"><title>教学讲义 | 技术学派</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="IT培训, Python, 大数据, 人工智能, Web前端, PHP, "><meta name="description" content="第一章：Redis 非关系型数据库第一节 简介Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。以往我们操作的数据库，都是存储在物理磁盘中的，Redis则是存储在缓存当中的，Redis和MySQL是需要搭配工作的，不常用的数据我们存储到MySQL中，而那些非常常用的数据，我们则可以存储在Redis当中！第二节 试用大家可以通过 互动教程（inte"><meta property="og:type" content="website"><meta property="og:title" content="教学讲义"><meta property="og:url" content="http://www.JiShuXuePai.com/tech/redis/notes.html"><meta property="og:site_name" content="技术学派"><meta property="og:description" content="第一章：Redis 非关系型数据库第一节 简介Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。以往我们操作的数据库，都是存储在物理磁盘中的，Redis则是存储在缓存当中的，Redis和MySQL是需要搭配工作的，不常用的数据我们存储到MySQL中，而那些非常常用的数据，我们则可以存储在Redis当中！第二节 试用大家可以通过 互动教程（inte"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/11/redis-install1.png"><meta property="og:updated_time" content="2018-05-11T08:14:18.942Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="教学讲义"><meta name="twitter:description" content="第一章：Redis 非关系型数据库第一节 简介Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。以往我们操作的数据库，都是存储在物理磁盘中的，Redis则是存储在缓存当中的，Redis和MySQL是需要搭配工作的，不常用的数据我们存储到MySQL中，而那些非常常用的数据，我们则可以存储在Redis当中！第二节 试用大家可以通过 互动教程（inte"><meta name="twitter:image" content="http://www.runoob.com/wp-content/uploads/2014/11/redis-install1.png"><link rel="stylesheet" href="/libs/bootstrap/bootstrap-grid.css"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/titillium-web/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/jquery.min.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?4c1bd812de3c30edbaa2b803c66f0a04";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head></html><body><div id="wrap"><header id="header"><div id="header-outer" class="outer"><div class="container"><div class="container-inner"><div id="header-title"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1></div><div id="header-inner" class="nav-container"><a id="main-nav-toggle" class="nav-icon fa fa-bars">菜单</a><div class="nav-container-inner"><ul id="main-nav"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/">主页</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/edu/index.html">学编程</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/blog/">博客</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/tips.html">学习建议</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/about.html">关于</a></li></ul><nav id="sub-nav"><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="搜索"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></nav></div></div></div></div></div></header><div class="container"><div class="main-body container-inner"><div class="main-body-inner"><section id="main"><div class="main-body-header"><h1 class="header"><em class="page-title-link" data-url="/tech/redis/notes.html">教学讲义</em><div class="author">袁晓飞</div></h1></div><div class="main-body-content"><article id="page-" class="article article-single article-type-page" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">教学讲义</h1></header><div class="article-entry" itemprop="articleBody"><h1 id="第一章：Redis-非关系型数据库"><a href="#第一章：Redis-非关系型数据库" class="headerlink" title="第一章：Redis 非关系型数据库"></a>第一章：Redis 非关系型数据库</h1><h2 id="第一节-简介"><a href="#第一节-简介" class="headerlink" title="第一节 简介"></a>第一节 简介</h2><blockquote><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。</p><p>以往我们操作的数据库，都是存储在物理磁盘中的，Redis则是存储在缓存当中的，Redis和MySQL是需要搭配工作的，不常用的数据我们存储到MySQL中，而那些非常常用的数据，我们则可以存储在Redis当中！</p></blockquote><h2 id="第二节-试用"><a href="#第二节-试用" class="headerlink" title="第二节 试用"></a>第二节 试用</h2><blockquote><p>大家可以通过 <a href="http://try.redis.io/" target="_blank" rel="noopener">互动教程（interactive tutorial）</a> 了解Redis最重要的特征。</p></blockquote><h2 id="第三节-下载"><a href="#第三节-下载" class="headerlink" title="第三节 下载"></a>第三节 下载</h2><blockquote><p><strong>下载地址：</strong><a href="https://github.com/MSOpenTech/redis/releases" target="_blank" rel="noopener">https://github.com/MSOpenTech/redis/releases</a>。</p><p>Redis 支持 32 位和 64 位。这个需要根据你系统平台的实际情况选择，这里我们下载 <strong>Redis-x64-xxx.zip</strong>压缩包到 C 盘，解压后，将文件夹重新命名为 <strong>redis</strong>。</p></blockquote><h3 id="1-使用方法"><a href="#1-使用方法" class="headerlink" title="1. 使用方法"></a>1. 使用方法</h3><blockquote><p>打开一个 <strong>cmd</strong> 窗口 使用cd命令切换目录到 <strong>C:\redis</strong> 运行 <strong>redis-server.exe redis.windows.conf</strong> 。</p><p>如果想方便的话，可以把 redis 的路径加到系统的环境变量里，这样就省得再输路径了，后面的那个 redis.windows.conf 可以省略，如果省略，会启用默认的。输入之后，会显示如下界面：</p></blockquote><p>这时候另启一个cmd窗口，原来的不要关闭，不然就无法访问服务端了。</p><p><img src="http://www.runoob.com/wp-content/uploads/2014/11/redis-install1.png" alt="Redis 安装"></p><p>切换到redis目录下运行 <strong>redis-cli.exe -h 127.0.0.1 -p 6379</strong> 。</p><p>设置键值对 <strong>set myKey abc</strong></p><p>取出键值对 <strong>get myKey</strong></p><p><img src="http://www.runoob.com/wp-content/uploads/2014/11/redis-install2.jpg" alt="Redis 安装"></p><h1 id="第二章-配置"><a href="#第二章-配置" class="headerlink" title="第二章 配置"></a>第二章 配置</h1><blockquote><p>Redis 的配置文件位于 Redis 安装目录下，文件名为 redis.conf</p></blockquote><blockquote><p>你可以通过 <strong>CONFIG</strong> 命令查看或设置配置项</p></blockquote><h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1. 语法"></a>1. 语法</h3><blockquote><p>Redis CONFIG 命令格式如下：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; CONFIG GET CONFIG_SETTING_NAME</span><br></pre></td></tr></table></figure><h3 id="2-实例"><a href="#2-实例" class="headerlink" title="2. 实例"></a>2. 实例</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; CONFIG GET loglevel</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) <span class="string">"loglevel"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"notice"</span></span><br></pre></td></tr></table></figure><blockquote><p>使用 <strong>*</strong> 号获取所有配置项：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; CONFIG GET *</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span>) <span class="string">"dbfilename"</span></span><br><span class="line">  <span class="number">2</span>) <span class="string">"dump.rdb"</span></span><br><span class="line">  <span class="number">3</span>) <span class="string">"requirepass"</span></span><br><span class="line">  <span class="number">4</span>) <span class="string">""</span></span><br><span class="line">  <span class="number">5</span>) <span class="string">"masterauth"</span></span><br><span class="line">  <span class="number">6</span>) <span class="string">""</span></span><br><span class="line">  <span class="number">7</span>) <span class="string">"unixsocket"</span></span><br><span class="line">  <span class="number">8</span>) <span class="string">""</span></span><br><span class="line">  <span class="number">9</span>) <span class="string">"logfile"</span></span><br><span class="line"> <span class="number">10</span>) <span class="string">""</span></span><br><span class="line"> <span class="number">11</span>) <span class="string">"pidfile"</span></span><br><span class="line"> <span class="number">12</span>) <span class="string">"/var/run/redis.pid"</span></span><br><span class="line"> <span class="number">13</span>) <span class="string">"maxmemory"</span></span><br><span class="line"> <span class="number">14</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">15</span>) <span class="string">"maxmemory-samples"</span></span><br><span class="line"> <span class="number">16</span>) <span class="string">"3"</span></span><br><span class="line"> <span class="number">17</span>) <span class="string">"timeout"</span></span><br><span class="line"> <span class="number">18</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">19</span>) <span class="string">"tcp-keepalive"</span></span><br><span class="line"> <span class="number">20</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">21</span>) <span class="string">"auto-aof-rewrite-percentage"</span></span><br><span class="line"> <span class="number">22</span>) <span class="string">"100"</span></span><br><span class="line"> <span class="number">23</span>) <span class="string">"auto-aof-rewrite-min-size"</span></span><br><span class="line"> <span class="number">24</span>) <span class="string">"67108864"</span></span><br><span class="line"> <span class="number">25</span>) <span class="string">"hash-max-ziplist-entries"</span></span><br><span class="line"> <span class="number">26</span>) <span class="string">"512"</span></span><br><span class="line"> <span class="number">27</span>) <span class="string">"hash-max-ziplist-value"</span></span><br><span class="line"> <span class="number">28</span>) <span class="string">"64"</span></span><br><span class="line"> <span class="number">29</span>) <span class="string">"list-max-ziplist-entries"</span></span><br><span class="line"> <span class="number">30</span>) <span class="string">"512"</span></span><br><span class="line"> <span class="number">31</span>) <span class="string">"list-max-ziplist-value"</span></span><br><span class="line"> <span class="number">32</span>) <span class="string">"64"</span></span><br><span class="line"> <span class="number">33</span>) <span class="string">"set-max-intset-entries"</span></span><br><span class="line"> <span class="number">34</span>) <span class="string">"512"</span></span><br><span class="line"> <span class="number">35</span>) <span class="string">"zset-max-ziplist-entries"</span></span><br><span class="line"> <span class="number">36</span>) <span class="string">"128"</span></span><br><span class="line"> <span class="number">37</span>) <span class="string">"zset-max-ziplist-value"</span></span><br><span class="line"> <span class="number">38</span>) <span class="string">"64"</span></span><br><span class="line"> <span class="number">39</span>) <span class="string">"hll-sparse-max-bytes"</span></span><br><span class="line"> <span class="number">40</span>) <span class="string">"3000"</span></span><br><span class="line"> <span class="number">41</span>) <span class="string">"lua-time-limit"</span></span><br><span class="line"> <span class="number">42</span>) <span class="string">"5000"</span></span><br><span class="line"> <span class="number">43</span>) <span class="string">"slowlog-log-slower-than"</span></span><br><span class="line"> <span class="number">44</span>) <span class="string">"10000"</span></span><br><span class="line"> <span class="number">45</span>) <span class="string">"latency-monitor-threshold"</span></span><br><span class="line"> <span class="number">46</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">47</span>) <span class="string">"slowlog-max-len"</span></span><br><span class="line"> <span class="number">48</span>) <span class="string">"128"</span></span><br><span class="line"> <span class="number">49</span>) <span class="string">"port"</span></span><br><span class="line"> <span class="number">50</span>) <span class="string">"6379"</span></span><br><span class="line"> <span class="number">51</span>) <span class="string">"tcp-backlog"</span></span><br><span class="line"> <span class="number">52</span>) <span class="string">"511"</span></span><br><span class="line"> <span class="number">53</span>) <span class="string">"databases"</span></span><br><span class="line"> <span class="number">54</span>) <span class="string">"16"</span></span><br><span class="line"> <span class="number">55</span>) <span class="string">"repl-ping-slave-period"</span></span><br><span class="line"> <span class="number">56</span>) <span class="string">"10"</span></span><br><span class="line"> <span class="number">57</span>) <span class="string">"repl-timeout"</span></span><br><span class="line"> <span class="number">58</span>) <span class="string">"60"</span></span><br><span class="line"> <span class="number">59</span>) <span class="string">"repl-backlog-size"</span></span><br><span class="line"> <span class="number">60</span>) <span class="string">"1048576"</span></span><br><span class="line"> <span class="number">61</span>) <span class="string">"repl-backlog-ttl"</span></span><br><span class="line"> <span class="number">62</span>) <span class="string">"3600"</span></span><br><span class="line"> <span class="number">63</span>) <span class="string">"maxclients"</span></span><br><span class="line"> <span class="number">64</span>) <span class="string">"4064"</span></span><br><span class="line"> <span class="number">65</span>) <span class="string">"watchdog-period"</span></span><br><span class="line"> <span class="number">66</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">67</span>) <span class="string">"slave-priority"</span></span><br><span class="line"> <span class="number">68</span>) <span class="string">"100"</span></span><br><span class="line"> <span class="number">69</span>) <span class="string">"min-slaves-to-write"</span></span><br><span class="line"> <span class="number">70</span>) <span class="string">"0"</span></span><br><span class="line"> <span class="number">71</span>) <span class="string">"min-slaves-max-lag"</span></span><br><span class="line"> <span class="number">72</span>) <span class="string">"10"</span></span><br><span class="line"> <span class="number">73</span>) <span class="string">"hz"</span></span><br><span class="line"> <span class="number">74</span>) <span class="string">"10"</span></span><br><span class="line"> <span class="number">75</span>) <span class="string">"no-appendfsync-on-rewrite"</span></span><br><span class="line"> <span class="number">76</span>) <span class="string">"no"</span></span><br><span class="line"> <span class="number">77</span>) <span class="string">"slave-serve-stale-data"</span></span><br><span class="line"> <span class="number">78</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">79</span>) <span class="string">"slave-read-only"</span></span><br><span class="line"> <span class="number">80</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">81</span>) <span class="string">"stop-writes-on-bgsave-error"</span></span><br><span class="line"> <span class="number">82</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">83</span>) <span class="string">"daemonize"</span></span><br><span class="line"> <span class="number">84</span>) <span class="string">"no"</span></span><br><span class="line"> <span class="number">85</span>) <span class="string">"rdbcompression"</span></span><br><span class="line"> <span class="number">86</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">87</span>) <span class="string">"rdbchecksum"</span></span><br><span class="line"> <span class="number">88</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">89</span>) <span class="string">"activerehashing"</span></span><br><span class="line"> <span class="number">90</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">91</span>) <span class="string">"repl-disable-tcp-nodelay"</span></span><br><span class="line"> <span class="number">92</span>) <span class="string">"no"</span></span><br><span class="line"> <span class="number">93</span>) <span class="string">"aof-rewrite-incremental-fsync"</span></span><br><span class="line"> <span class="number">94</span>) <span class="string">"yes"</span></span><br><span class="line"> <span class="number">95</span>) <span class="string">"appendonly"</span></span><br><span class="line"> <span class="number">96</span>) <span class="string">"no"</span></span><br><span class="line"> <span class="number">97</span>) <span class="string">"dir"</span></span><br><span class="line"> <span class="number">98</span>) <span class="string">"/home/deepak/Downloads/redis-2.8.13/src"</span></span><br><span class="line"> <span class="number">99</span>) <span class="string">"maxmemory-policy"</span></span><br><span class="line"><span class="number">100</span>) <span class="string">"volatile-lru"</span></span><br><span class="line"><span class="number">101</span>) <span class="string">"appendfsync"</span></span><br><span class="line"><span class="number">102</span>) <span class="string">"everysec"</span></span><br><span class="line"><span class="number">103</span>) <span class="string">"save"</span></span><br><span class="line"><span class="number">104</span>) <span class="string">"3600 1 300 100 60 10000"</span></span><br><span class="line"><span class="number">105</span>) <span class="string">"loglevel"</span></span><br><span class="line"><span class="number">106</span>) <span class="string">"notice"</span></span><br><span class="line"><span class="number">107</span>) <span class="string">"client-output-buffer-limit"</span></span><br><span class="line"><span class="number">108</span>) <span class="string">"normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60"</span></span><br><span class="line"><span class="number">109</span>) <span class="string">"unixsocketperm"</span></span><br><span class="line"><span class="number">110</span>) <span class="string">"0"</span></span><br><span class="line"><span class="number">111</span>) <span class="string">"slaveof"</span></span><br><span class="line"><span class="number">112</span>) <span class="string">""</span></span><br><span class="line"><span class="number">113</span>) <span class="string">"notify-keyspace-events"</span></span><br><span class="line"><span class="number">114</span>) <span class="string">""</span></span><br><span class="line"><span class="number">115</span>) <span class="string">"bind"</span></span><br><span class="line"><span class="number">116</span>) <span class="string">""</span></span><br></pre></td></tr></table></figure><h3 id="3-编辑配置"><a href="#3-编辑配置" class="headerlink" title="3. 编辑配置"></a>3. 编辑配置</h3><blockquote><p>你可以通过修改 redis.conf 文件或使用 <strong>CONFIG set</strong> 命令来修改配置。</p></blockquote><h4 id="3-1-语法"><a href="#3-1-语法" class="headerlink" title="3.1 语法"></a>3.1 语法</h4><blockquote><p><strong>CONFIG SET</strong> 命令基本语法：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE</span><br></pre></td></tr></table></figure><h4 id="3-2-实例"><a href="#3-2-实例" class="headerlink" title="3.2 实例"></a>3.2 实例</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; CONFIG SET loglevel <span class="string">"notice"</span></span><br><span class="line">OK</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; CONFIG GET loglevel</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) <span class="string">"loglevel"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"notice"</span></span><br></pre></td></tr></table></figure><h3 id="4-参数说明"><a href="#4-参数说明" class="headerlink" title="4. 参数说明"></a>4. 参数说明</h3><blockquote><p>redis.conf 配置项说明如下：</p><p>\1. Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程</p><p>​ <strong>daemonize no</strong></p><p>\2. 当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定</p><p>​ <strong>pidfile /var/run/redis.pid</strong></p><p>\3. 指定Redis监听端口，默认端口为6379，作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia Merz的名字</p><p>​ <strong>port 6379</strong></p><p>\4. 绑定的主机地址</p><p>​ <strong>bind 127.0.0.1</strong></p><p>5.当 客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能</p><p>​ <strong>timeout 300</strong></p><p>\6. 指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose</p><p>​ <strong>loglevel verbose</strong></p><p>\7. 日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给/dev/null</p><p>​ <strong>logfile stdout</strong></p><p>\8. 设置数据库的数量，默认数据库为0，可以使用SELECT<dbid>命令在连接上指定数据库id</dbid></p><p>​ <strong>databases 16</strong></p><p>\9. 指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合</p><p>​ <strong>save<seconds><changes></changes></seconds></strong></p><p>​ Redis默认配置文件中提供了三个条件：</p><p>​ <strong>save 900 1</strong></p><p><strong>save 300 10</strong></p><p><strong>save 60 10000</strong></p><p>​ 分别表示900秒（15分钟）内有1个更改，300秒（5分钟）内有10个更改以及60秒内有10000个更改。</p><p>\10. 指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大</p><p>​ <strong>rdbcompression yes</strong></p><p>\11. 指定本地数据库文件名，默认值为dump.rdb</p><p>​ <strong>dbfilename dump.rdb</strong></p><p>\12. 指定本地数据库存放目录</p><p>​ <strong>dir ./</strong></p><p>\13. 设置当本机为slav服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步</p><p>​ <strong>slaveof<masterip><masterport></masterport></masterip></strong></p><p>\14. 当master服务设置了密码保护时，slav服务连接master的密码</p><p>​ <strong>masterauth<master-password></master-password></strong></p><p>\15. 设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH<password>命令提供密码，默认关闭</password></p><p>​ <strong>requirepass foobared</strong></p><p>\16. 设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置 maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息</p><p>​ <strong>maxclients 128</strong></p><p>\17. 指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区</p><p>​ <strong>maxmemory<bytes></bytes></strong></p><p>\18. 指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no</p><p>​ <strong>appendonly no</strong></p><p>\19. 指定更新日志文件名，默认为appendonly.aof</p><p>​ <strong>appendfilename appendonly.aof</strong></p><p>\20. 指定更新日志条件，共有3个可选值：<br>​ <strong>no</strong>：表示等操作系统进行数据缓存同步到磁盘（快）<br>​ <strong>always</strong>：表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）<br>​ <strong>everysec</strong>：表示每秒同步一次（折衷，默认值）</p><p>​ <strong>appendfsync everysec</strong></p><p>\21. 指定是否启用虚拟内存机制，默认值为no，简单的介绍一下，VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中（在后面的文章我会仔细分析Redis的VM机制）</p><p>​ <strong>vm-enabled no</strong></p><p>\22. 虚拟内存文件路径，默认值为/tmp/redis.swap，不可多个Redis实例共享</p><p>​ <strong>vm-swap-file /tmp/redis.swap</strong></p><p>\23. 将所有大于vm-max-memory的数据存入虚拟内存,无论vm-max-memory设置多小,所有索引数据都是内存存储的(Redis的索引数据 就是keys),也就是说,当vm-max-memory设置为0的时候,其实是所有value都存在于磁盘。默认值为0</p><p>​ <strong>vm-max-memory 0</strong></p><p>\24. Redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的 数据大小来设定的，作者建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大大对象，则可以使用更大的page，如果不 确定，就使用默认值</p><p>​ <strong>vm-page-size 32</strong></p><p>\25. 设置swap文件中的page数量，由于页表（一种表示页面空闲或使用的bitmap）是在放在内存中的，，在磁盘上每8个pages将消耗1byte的内存。</p><p>​ <strong>vm-pages 134217728</strong></p><p>\26. 设置访问swap文件的线程数,最好不要超过机器的核数,如果设置为0,那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟。默认值为4</p><p>​ <strong>vm-max-threads 4</strong></p><p>\27. 设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启</p><p>​ <strong>glueoutputbuf yes</strong></p><p>\28. 指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</p><p>​ <strong>hash-max-zipmap-entries 64</strong></p><p><strong>hash-max-zipmap-value 512</strong></p><p>\29. 指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）</p><p>​ <strong>activerehashing yes</strong></p><p>\30. 指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</p><p>​ <strong>include /path/to/local.conf</strong></p></blockquote><h1 id="第三章-Redis-数据类型"><a href="#第三章-Redis-数据类型" class="headerlink" title="第三章 Redis 数据类型"></a>第三章 Redis 数据类型</h1><blockquote><p>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)。</p></blockquote><h2 id="第一节-String-字符串"><a href="#第一节-String-字符串" class="headerlink" title="第一节 String (字符串)"></a>第一节 String (字符串)</h2><blockquote><p>string是redis最基本的类型，你可以理解成与Memcached一模一样的类型，一个key对应一个value。</p></blockquote><blockquote><p>string类型是二进制安全的。意思是redis的string可以包含任何数据。比如jpg图片或者序列化的对象</p></blockquote><blockquote><p>string类型是Redis最基本的数据类型，一个键最大能存储512MB</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET name <span class="string">"runoob"</span></span><br><span class="line">OK</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; GET name</span><br><span class="line"><span class="string">"runoob"</span></span><br></pre></td></tr></table></figure><h2 id="第二节-Hash-哈希"><a href="#第二节-Hash-哈希" class="headerlink" title="第二节 Hash(哈希)"></a>第二节 Hash(哈希)</h2><blockquote><p>Redis hash 是一个键值(key=&gt;value)对集合</p></blockquote><blockquote><p>Redis hash是一个string类型的field和value的映射表，hash特别适合用于存储对象</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; HMSET myhash field1 <span class="string">"Hello"</span> field2 <span class="string">"World"</span></span><br><span class="line"><span class="string">"OK"</span></span><br><span class="line">redis&gt; HGET myhash field1</span><br><span class="line"><span class="string">"Hello"</span></span><br><span class="line">redis&gt; HGET myhash field2</span><br><span class="line"><span class="string">"World"</span></span><br></pre></td></tr></table></figure><blockquote><p>以上实例中 hash 数据类型存储了包含用户脚本信息的用户对象。 实例中我们使用了 Redis <strong>HMSET, HGETALL</strong> 命令，<strong>user:1</strong> 为键值。</p><p>每个 hash 可以存储 2的32次方-1 键值对（40多亿）</p></blockquote><h2 id="第四节-List-列表"><a href="#第四节-List-列表" class="headerlink" title="第四节 List(列表)"></a>第四节 List(列表)</h2><blockquote><p>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lpush runoob redis</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lpush runoob mongodb</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lpush runoob rabitmq</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange runoob <span class="number">0</span> <span class="number">10</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"rabitmq"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"mongodb"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"redis"</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>列表最多可存储 2的32次方 - 1 元素 (4294967295, 每个列表可存储40多亿)。</p></blockquote><h2 id="第五节-Set-集合"><a href="#第五节-Set-集合" class="headerlink" title="第五节 Set(集合)"></a>第五节 Set(集合)</h2><blockquote><p>Redis的Set是string类型的无序集合。</p><p>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)</p></blockquote><h3 id="1-sadd-命令"><a href="#1-sadd-命令" class="headerlink" title="1. sadd 命令"></a>1. sadd 命令</h3><blockquote><p>添加一个string元素到,key对应的set集合中，成功返回1,如果元素已经在集合中返回0,key对应的set不存在返回错误</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sadd key member</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd runoob redis</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd runoob mongodb</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd runoob rabitmq</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd runoob rabitmq</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers runoob</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) <span class="string">"rabitmq"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"mongodb"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"redis"</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>注意：</strong>以上实例中 rabitmq 添加了两次，但根据集合内元素的唯一性，第二次插入的元素将被忽略。</p><p>集合中最大的成员数为 2的32次方 - 1(4294967295, 每个集合可存储40多亿个成员)</p></blockquote><h3 id="2-zadd-命令"><a href="#2-zadd-命令" class="headerlink" title="2. zadd 命令"></a>2. zadd 命令</h3><blockquote><p>添加元素到集合，元素在集合中存在则更新对应score</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zadd key score member</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; zadd runoob <span class="number">0</span> redis</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; zadd runoob <span class="number">0</span> mongodb</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; zadd runoob <span class="number">0</span> rabitmq</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; zadd runoob <span class="number">0</span> rabitmq</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZRANGEBYSCORE runoob <span class="number">0</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) <span class="string">"redis"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"mongodb"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"rabitmq"</span></span><br></pre></td></tr></table></figure><h1 id="第四章-Redis-命令"><a href="#第四章-Redis-命令" class="headerlink" title="第四章 Redis 命令"></a>第四章 Redis 命令</h1><blockquote><p>Redis 命令用于在 redis 服务上执行操作。</p><p>要在 redis 服务上执行命令需要一个 redis 客户端。Redis 客户端在我们之前下载的的 redis 的安装包中。</p></blockquote><h3 id="1-语法-1"><a href="#1-语法-1" class="headerlink" title="1. 语法"></a>1. 语法</h3><blockquote><p>Redis 客户端的基本语法为：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$redis-cli</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; PING</span><br><span class="line"></span><br><span class="line">PONG</span><br></pre></td></tr></table></figure><blockquote><p>在以上实例中我们连接到本地的 redis 服务并执行 <strong>PING</strong> 命令，该命令用于检测 redis 服务是否启动。</p></blockquote><h3 id="2-远程服务器上执行命令"><a href="#2-远程服务器上执行命令" class="headerlink" title="2. 远程服务器上执行命令"></a>2. 远程服务器上执行命令</h3><blockquote><p>如果需要在远程 redis 服务上执行命令，同样我们使用的也是 <strong>redis-cli</strong> 命令</p></blockquote><h4 id="2-1-语法"><a href="#2-1-语法" class="headerlink" title="2.1 语法"></a>2.1 语法</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -h host -p port -a password</span><br></pre></td></tr></table></figure><h4 id="2-2-实例"><a href="#2-2-实例" class="headerlink" title="2.2 实例"></a>2.2 实例</h4><blockquote><p>以下实例演示了如何连接到主机为 127.0.0.1，端口为 6379 ，密码为 mypass 的 redis 服务上</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$redis-cli -h <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -p <span class="number">6379</span> -a <span class="string">"mypass"</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; PING</span><br><span class="line"></span><br><span class="line">PONG</span><br></pre></td></tr></table></figure><h1 id="第七章-Redis-键-key"><a href="#第七章-Redis-键-key" class="headerlink" title="第七章 Redis 键(key)"></a>第七章 Redis 键(key)</h1><blockquote><p>Redis 键命令用于管理 redis 的键。</p></blockquote><h2 id="第一节-语法"><a href="#第一节-语法" class="headerlink" title="第一节 语法"></a>第一节 语法</h2><blockquote><p>Redis 键命令的基本语法如下：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; COMMAND KEY_NAME</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET runoobkey redis</span><br><span class="line">OK</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; DEL runoobkey</span><br><span class="line">(integer) <span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>在以上实例中 <strong>DEL</strong> 是一个命令， <strong>runoobkey</strong> 是一个键。 如果键被删除成功，命令执行后输出 <strong>(integer) 1</strong>，否则将输出 <strong>(integer) 0</strong></p></blockquote><h2 id="第二节-Redis-keys命令"><a href="#第二节-Redis-keys命令" class="headerlink" title="第二节 Redis keys命令"></a>第二节 Redis keys命令</h2><blockquote><p>下表给出了与 Redis 键相关的基本命令：</p></blockquote><table><thead><tr><th>序号</th><th>命令及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="http://www.runoob.com/redis/keys-del.html" target="_blank" rel="noopener">DEL key</a>该命令用于在 key 存在时删除 key。</td></tr><tr><td>2</td><td><a href="http://www.runoob.com/redis/keys-dump.html" target="_blank" rel="noopener">DUMP key</a> 序列化给定 key ，并返回被序列化的值。</td></tr><tr><td>3</td><td><a href="http://www.runoob.com/redis/keys-exists.html" target="_blank" rel="noopener">EXISTS key</a> 检查给定 key 是否存在。</td></tr><tr><td>4</td><td><a href="http://www.runoob.com/redis/keys-expire.html" target="_blank" rel="noopener">EXPIRE key</a> seconds为给定 key 设置过期时间。</td></tr><tr><td>5</td><td><a href="http://www.runoob.com/redis/keys-expireat.html" target="_blank" rel="noopener">EXPIREAT key timestamp</a> EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。</td></tr><tr><td>6</td><td><a href="http://www.runoob.com/redis/keys-pexpire.html" target="_blank" rel="noopener">PEXPIRE key milliseconds</a> 设置 key 的过期时间以毫秒计。</td></tr><tr><td>7</td><td><a href="http://www.runoob.com/redis/keys-pexpireat.html" target="_blank" rel="noopener">PEXPIREAT key milliseconds-timestamp</a> 设置 key 过期时间的时间戳(unix timestamp) 以毫秒计</td></tr><tr><td>8</td><td><a href="http://www.runoob.com/redis/keys-keys.html" target="_blank" rel="noopener">KEYS pattern</a> 查找所有符合给定模式( pattern)的 key 。</td></tr><tr><td>9</td><td><a href="http://www.runoob.com/redis/keys-move.html" target="_blank" rel="noopener">MOVE key db</a> 将当前数据库的 key 移动到给定的数据库 db 当中。</td></tr><tr><td>10</td><td><a href="http://www.runoob.com/redis/keys-persist.html" target="_blank" rel="noopener">PERSIST key</a> 移除 key 的过期时间，key 将持久保持。</td></tr><tr><td>11</td><td><a href="http://www.runoob.com/redis/keys-pttl.html" target="_blank" rel="noopener">PTTL key</a> 以毫秒为单位返回 key 的剩余的过期时间。</td></tr><tr><td>12</td><td><a href="http://www.runoob.com/redis/keys-ttl.html" target="_blank" rel="noopener">TTL key</a> 以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)。</td></tr><tr><td>13</td><td><a href="http://www.runoob.com/redis/keys-randomkey.html" target="_blank" rel="noopener">RANDOMKEY</a> 从当前数据库中随机返回一个 key 。</td></tr><tr><td>14</td><td><a href="http://www.runoob.com/redis/keys-rename.html" target="_blank" rel="noopener">RENAME key newkey</a> 修改 key 的名称</td></tr><tr><td>15</td><td><a href="http://www.runoob.com/redis/keys-renamenx.html" target="_blank" rel="noopener">RENAMENX key newkey</a> 仅当 newkey 不存在时，将 key 改名为 newkey 。</td></tr><tr><td>16</td><td><a href="http://www.runoob.com/redis/keys-type.html" target="_blank" rel="noopener">TYPE key</a> 返回 key 所储存的值的类型。</td></tr></tbody></table><h1 id="第八章-Redis-字符串-String"><a href="#第八章-Redis-字符串-String" class="headerlink" title="第八章 Redis 字符串(String)"></a>第八章 Redis 字符串(String)</h1><h2 id="第一节-Redis-字符串"><a href="#第一节-Redis-字符串" class="headerlink" title="第一节 Redis 字符串"></a>第一节 Redis 字符串</h2><blockquote><p>Redis 字符串数据类型的相关命令用于管理 Redis 字符串值，基本语法如下</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; COMMAND KEY_NAME</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET runoobkey redis</span><br><span class="line">OK</span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; GET runoobkey</span><br><span class="line"><span class="string">"redis"</span></span><br></pre></td></tr></table></figure><blockquote><p>在以上实例中我们使用了 <strong>SET</strong> 和 <strong>GET</strong> 命令，键为 <strong>runoobkey</strong>。</p></blockquote><h2 id="第二节-Redis字符串命令"><a href="#第二节-Redis字符串命令" class="headerlink" title="第二节 Redis字符串命令"></a>第二节 Redis字符串命令</h2><blockquote><p>下表列出了常用的 redis 字符串命令：</p></blockquote><table><thead><tr><th>序号</th><th>命令及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="http://www.runoob.com/redis/strings-set.html" target="_blank" rel="noopener">SET key value</a> 设置指定 key 的值</td></tr><tr><td>2</td><td><a href="http://www.runoob.com/redis/strings-get.html" target="_blank" rel="noopener">GET key</a> 获取指定 key 的值。</td></tr><tr><td>3</td><td><a href="http://www.runoob.com/redis/strings-getrange.html" target="_blank" rel="noopener">GETRANGE key start end</a> 返回 key 中字符串值的子字符</td></tr><tr><td>4</td><td><a href="http://www.runoob.com/redis/strings-getset.html" target="_blank" rel="noopener">GETSET key value</a>将给定 key 的值设为 value ，并返回 key 的旧值(old value)。</td></tr><tr><td>5</td><td><a href="http://www.runoob.com/redis/strings-getbit.html" target="_blank" rel="noopener">GETBIT key offset</a>对 key 所储存的字符串值，获取指定偏移量上的位(bit)。</td></tr><tr><td>6</td><td><a href="http://www.runoob.com/redis/strings-mget.html" target="_blank" rel="noopener">MGET key1 [key2..]</a>获取所有(一个或多个)给定 key 的值。</td></tr><tr><td>7</td><td><a href="http://www.runoob.com/redis/strings-setbit.html" target="_blank" rel="noopener">SETBIT key offset value</a>对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。</td></tr><tr><td>8</td><td><a href="http://www.runoob.com/redis/strings-setex.html" target="_blank" rel="noopener">SETEX key seconds value</a>将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)。</td></tr><tr><td>9</td><td><a href="http://www.runoob.com/redis/strings-setnx.html" target="_blank" rel="noopener">SETNX key value</a>只有在 key 不存在时设置 key 的值。</td></tr><tr><td>10</td><td><a href="http://www.runoob.com/redis/strings-setrange.html" target="_blank" rel="noopener">SETRANGE key offset value</a>用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始。</td></tr><tr><td>11</td><td><a href="http://www.runoob.com/redis/strings-strlen.html" target="_blank" rel="noopener">STRLEN key</a>返回 key 所储存的字符串值的长度。</td></tr><tr><td>12</td><td><a href="http://www.runoob.com/redis/strings-mset.html" target="_blank" rel="noopener">MSET key value [key value …]</a>同时设置一个或多个 key-value 对。</td></tr><tr><td>13</td><td><a href="http://www.runoob.com/redis/strings-msetnx.html" target="_blank" rel="noopener">MSETNX key value [key value …]</a> 同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。</td></tr><tr><td>14</td><td><a href="http://www.runoob.com/redis/strings-psetex.html" target="_blank" rel="noopener">PSETEX key milliseconds value</a>这个命令和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间，而不是像 SETEX 命令那样，以秒为单位。</td></tr><tr><td>15</td><td><a href="http://www.runoob.com/redis/strings-incr.html" target="_blank" rel="noopener">INCR key</a>将 key 中储存的数字值增一。</td></tr><tr><td>16</td><td><a href="http://www.runoob.com/redis/strings-incrby.html" target="_blank" rel="noopener">INCRBY key increment</a>将 key 所储存的值加上给定的增量值（increment） 。</td></tr><tr><td>17</td><td><a href="http://www.runoob.com/redis/strings-incrbyfloat.html" target="_blank" rel="noopener">INCRBYFLOAT key increment</a>将 key 所储存的值加上给定的浮点增量值（increment） 。</td></tr><tr><td>18</td><td><a href="http://www.runoob.com/redis/strings-decr.html" target="_blank" rel="noopener">DECR key</a>将 key 中储存的数字值减一。</td></tr><tr><td>19</td><td><a href="http://www.runoob.com/redis/strings-decrby.html" target="_blank" rel="noopener">DECRBY key decrement</a>key 所储存的值减去给定的减量值（decrement） 。</td></tr><tr><td>20</td><td><a href="http://www.runoob.com/redis/strings-append.html" target="_blank" rel="noopener">APPEND key value</a>如果 key 已经存在并且是一个字符串， APPEND 命令将 value 追加到 key 原来的值的末尾。</td></tr></tbody></table><h1 id="第九章-Redis-哈希-Hash"><a href="#第九章-Redis-哈希-Hash" class="headerlink" title="第九章 Redis 哈希(Hash)"></a>第九章 Redis 哈希(Hash)</h1><h2 id="第一节-Redis-哈希"><a href="#第一节-Redis-哈希" class="headerlink" title="第一节 Redis 哈希"></a>第一节 Redis 哈希</h2><blockquote><p>Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象</p></blockquote><blockquote><p>Redis 中每个 hash 可以存储 2的32次方 - 1 键值对（40多亿）</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;  HMSET runoobkey name <span class="string">"redis tutorial"</span> description <span class="string">"redis basic commands for caching"</span> likes <span class="number">20</span> visitors <span class="number">23000</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;  HGETALL runoobkey</span><br><span class="line"><span class="number">1</span>) <span class="string">"name"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"redis tutorial"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"description"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"redis basic commands for caching"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"likes"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"20"</span></span><br><span class="line"><span class="number">7</span>) <span class="string">"visitors"</span></span><br><span class="line"><span class="number">8</span>) <span class="string">"23000"</span></span><br></pre></td></tr></table></figure><blockquote><p>在以上实例中，我们设置了 redis 的一些描述信息(name, description, likes, visitors) 到哈希表的 <strong>runoobkey</strong> 中</p></blockquote><h2 id="第二节-Redis-hash-命令"><a href="#第二节-Redis-hash-命令" class="headerlink" title="第二节 Redis hash 命令"></a>第二节 Redis hash 命令</h2><blockquote><p>下表列出了 redis hash 基本的相关命令：</p></blockquote><table><thead><tr><th>序号</th><th>命令及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="http://www.runoob.com/redis/hashes-hdel.html" target="_blank" rel="noopener">HDEL key field1 [field2]</a> 删除一个或多个哈希表字段</td></tr><tr><td>2</td><td><a href="http://www.runoob.com/redis/hashes-hexists.html" target="_blank" rel="noopener">HEXISTS key field</a> 查看哈希表 key 中，指定的字段是否存在。</td></tr><tr><td>3</td><td><a href="http://www.runoob.com/redis/hashes-hget.html" target="_blank" rel="noopener">HGET key field</a> 获取存储在哈希表中指定字段的值。</td></tr><tr><td>4</td><td><a href="http://www.runoob.com/redis/hashes-hgetall.html" target="_blank" rel="noopener">HGETALL key</a> 获取在哈希表中指定 key 的所有字段和值</td></tr><tr><td>5</td><td><a href="http://www.runoob.com/redis/hashes-hincrby.html" target="_blank" rel="noopener">HINCRBY key field increment</a> 为哈希表 key 中的指定字段的整数值加上增量 increment 。</td></tr><tr><td>6</td><td><a href="http://www.runoob.com/redis/hashes-hincrbyfloat.html" target="_blank" rel="noopener">HINCRBYFLOAT key field increment</a> 为哈希表 key 中的指定字段的浮点数值加上增量 increment 。</td></tr><tr><td>7</td><td><a href="http://www.runoob.com/redis/hashes-hkeys.html" target="_blank" rel="noopener">HKEYS key</a> 获取所有哈希表中的字段</td></tr><tr><td>8</td><td><a href="http://www.runoob.com/redis/hashes-hlen.html" target="_blank" rel="noopener">HLEN key</a> 获取哈希表中字段的数量</td></tr><tr><td>9</td><td><a href="http://www.runoob.com/redis/hashes-hmget.html" target="_blank" rel="noopener">HMGET key field1 [field2]</a> 获取所有给定字段的值</td></tr><tr><td>10</td><td><a href="http://www.runoob.com/redis/hashes-hmset.html" target="_blank" rel="noopener">HMSET key field1 value1 [field2 value2 ]</a> 同时将多个 field-value (域-值)对设置到哈希表 key 中。</td></tr><tr><td>11</td><td><a href="http://www.runoob.com/redis/hashes-hset.html" target="_blank" rel="noopener">HSET key field value</a> 将哈希表 key 中的字段 field 的值设为 value 。</td></tr><tr><td>12</td><td><a href="http://www.runoob.com/redis/hashes-hsetnx.html" target="_blank" rel="noopener">HSETNX key field value</a> 只有在字段 field 不存在时，设置哈希表字段的值。</td></tr><tr><td>13</td><td><a href="http://www.runoob.com/redis/hashes-hvals.html" target="_blank" rel="noopener">HVALS key</a> 获取哈希表中所有值</td></tr><tr><td>14</td><td>HSCAN key cursor [MATCH pattern][COUNT count] 迭代哈希表中的键值对。</td></tr></tbody></table><h1 id="第十章-Redis-列表-List"><a href="#第十章-Redis-列表-List" class="headerlink" title="第十章 Redis 列表(List)"></a>第十章 Redis 列表(List)</h1><blockquote><p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）</p><p>一个列表最多可以包含 2的32次方 - 1 个元素 (4294967295, 每个列表超过40亿个元素)</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; LPUSH runoobkey redis</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; LPUSH runoobkey mongodb</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; LPUSH runoobkey mysql</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; LRANGE runoobkey <span class="number">0</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) <span class="string">"mysql"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"mongodb"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"redis"</span></span><br></pre></td></tr></table></figure><blockquote><p>在以上实例中我们使用了 <strong>LPUSH</strong> 将三个值插入了名为 <strong>runoobkey</strong> 的列表当中。</p></blockquote><h2 id="第一节-列表命令"><a href="#第一节-列表命令" class="headerlink" title="第一节 列表命令"></a>第一节 列表命令</h2><blockquote><p>下表列出了列表相关的基本命令：</p></blockquote><table><thead><tr><th>序号</th><th>命令及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="http://www.runoob.com/redis/lists-blpop.html" target="_blank" rel="noopener">BLPOP key1 [key2 ] timeout</a> 移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr><tr><td>2</td><td><a href="http://www.runoob.com/redis/lists-brpop.html" target="_blank" rel="noopener">BRPOP key1 [key2 ] timeout</a> 移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr><tr><td>3</td><td><a href="http://www.runoob.com/redis/lists-brpoplpush.html" target="_blank" rel="noopener">BRPOPLPUSH source destination timeout</a> 从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它； 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr><tr><td>4</td><td><a href="http://www.runoob.com/redis/lists-lindex.html" target="_blank" rel="noopener">LINDEX key index</a> 通过索引获取列表中的元素</td></tr><tr><td>5</td><td>[LINSERT key BEFORE\</td><td>AFTER pivot value](<a href="http://www.runoob.com/redis/lists-linsert.html" target="_blank" rel="noopener">http://www.runoob.com/redis/lists-linsert.html</a>) 在列表的元素前或者后插入元素</td></tr><tr><td>6</td><td><a href="http://www.runoob.com/redis/lists-llen.html" target="_blank" rel="noopener">LLEN key</a> 获取列表长度</td></tr><tr><td>7</td><td><a href="http://www.runoob.com/redis/lists-lpop.html" target="_blank" rel="noopener">LPOP key</a> 移出并获取列表的第一个元素</td></tr><tr><td>8</td><td><a href="http://www.runoob.com/redis/lists-lpush.html" target="_blank" rel="noopener">LPUSH key value1 [value2]</a> 将一个或多个值插入到列表头部</td></tr><tr><td>9</td><td><a href="http://www.runoob.com/redis/lists-lpushx.html" target="_blank" rel="noopener">LPUSHX key value</a> 将一个值插入到已存在的列表头部</td></tr><tr><td>10</td><td><a href="http://www.runoob.com/redis/lists-lrange.html" target="_blank" rel="noopener">LRANGE key start stop</a> 获取列表指定范围内的元素</td></tr><tr><td>11</td><td><a href="http://www.runoob.com/redis/lists-lrem.html" target="_blank" rel="noopener">LREM key count value</a> 移除列表元素</td></tr><tr><td>12</td><td><a href="http://www.runoob.com/redis/lists-lset.html" target="_blank" rel="noopener">LSET key index value</a> 通过索引设置列表元素的值</td></tr><tr><td>13</td><td><a href="http://www.runoob.com/redis/lists-ltrim.html" target="_blank" rel="noopener">LTRIM key start stop</a> 对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。</td></tr><tr><td>14</td><td><a href="http://www.runoob.com/redis/lists-rpop.html" target="_blank" rel="noopener">RPOP key</a> 移除并获取列表最后一个元素</td></tr><tr><td>15</td><td><a href="http://www.runoob.com/redis/lists-rpoplpush.html" target="_blank" rel="noopener">RPOPLPUSH source destination</a> 移除列表的最后一个元素，并将该元素添加到另一个列表并返回</td></tr><tr><td>16</td><td><a href="http://www.runoob.com/redis/lists-rpush.html" target="_blank" rel="noopener">RPUSH key value1 [value2]</a> 在列表中添加一个或多个值</td></tr><tr><td>17</td><td><a href="http://www.runoob.com/redis/lists-rpushx.html" target="_blank" rel="noopener">RPUSHX key value</a> 为已存在的列表添加值</td></tr></tbody></table><h1 id="第十一章-Redis集合-set"><a href="#第十一章-Redis集合-set" class="headerlink" title="第十一章 Redis集合(set)"></a>第十一章 Redis集合(set)</h1><blockquote><p>Redis 的 Set 是 String 类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p><p>Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。</p><p>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p></blockquote><h2 id="第一节-实例"><a href="#第一节-实例" class="headerlink" title="第一节 实例"></a>第一节 实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey mysql</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey mysql</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; SMEMBERS runoobkey</span><br><span class="line"></span><br><span class="line">1) &quot;mysql&quot;</span><br><span class="line">2) &quot;mongodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure><h2 id="第二节-集合命令"><a href="#第二节-集合命令" class="headerlink" title="第二节 集合命令"></a>第二节 集合命令</h2><blockquote><p>下表列出了 Redis 集合基本命令：</p></blockquote><table><thead><tr><th>序号</th><th>命令及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="http://www.runoob.com/redis/sets-sadd.html" target="_blank" rel="noopener">SADD key member1 [member2]</a> 向集合添加一个或多个成员</td></tr><tr><td>2</td><td><a href="http://www.runoob.com/redis/sets-scard.html" target="_blank" rel="noopener">SCARD key</a> 获取集合的成员数</td></tr><tr><td>3</td><td><a href="http://www.runoob.com/redis/sets-sdiff.html" target="_blank" rel="noopener">SDIFF key1 [key2]</a> 返回给定所有集合的差集</td></tr><tr><td>4</td><td><a href="http://www.runoob.com/redis/sets-sdiffstore.html" target="_blank" rel="noopener">SDIFFSTORE destination key1 [key2]</a> 返回给定所有集合的差集并存储在 destination 中</td></tr><tr><td>5</td><td><a href="http://www.runoob.com/redis/sets-sinter.html" target="_blank" rel="noopener">SINTER key1 [key2]</a> 返回给定所有集合的交集</td></tr><tr><td>6</td><td><a href="http://www.runoob.com/redis/sets-sinterstore.html" target="_blank" rel="noopener">SINTERSTORE destination key1 [key2]</a> 返回给定所有集合的交集并存储在 destination 中</td></tr><tr><td>7</td><td><a href="http://www.runoob.com/redis/sets-sismember.html" target="_blank" rel="noopener">SISMEMBER key member</a> 判断 member 元素是否是集合 key 的成员</td></tr><tr><td>8</td><td><a href="http://www.runoob.com/redis/sets-smembers.html" target="_blank" rel="noopener">SMEMBERS key</a> 返回集合中的所有成员</td></tr><tr><td>9</td><td><a href="http://www.runoob.com/redis/sets-smove.html" target="_blank" rel="noopener">SMOVE source destination member</a> 将 member 元素从 source 集合移动到 destination 集合</td></tr><tr><td>10</td><td><a href="http://www.runoob.com/redis/sets-spop.html" target="_blank" rel="noopener">SPOP key</a> 移除并返回集合中的一个随机元素</td></tr><tr><td>11</td><td><a href="http://www.runoob.com/redis/sets-srandmember.html" target="_blank" rel="noopener">SRANDMEMBER key [count]</a> 返回集合中一个或多个随机数</td></tr><tr><td>12</td><td><a href="http://www.runoob.com/redis/sets-srem.html" target="_blank" rel="noopener">SREM key member1 [member2]</a> 移除集合中一个或多个成员</td></tr><tr><td>13</td><td><a href="http://www.runoob.com/redis/sets-sunion.html" target="_blank" rel="noopener">SUNION key1 [key2]</a> 返回所有给定集合的并集</td></tr><tr><td>14</td><td><a href="http://www.runoob.com/redis/sets-sunionstore.html" target="_blank" rel="noopener">SUNIONSTORE destination key1 [key2]</a> 所有给定集合的并集存储在 destination 集合中</td></tr><tr><td>15</td><td><a href="http://www.runoob.com/redis/sets-sscan.html" target="_blank" rel="noopener">SSCAN key cursor [MATCH pattern] [COUNT count]</a> 迭代集合中的元素</td></tr></tbody></table><h1 id="第十二章-Redis-有序集合-sorted-set"><a href="#第十二章-Redis-有序集合-sorted-set" class="headerlink" title="第十二章 Redis 有序集合(sorted set)"></a>第十二章 Redis 有序集合(sorted set)</h1><blockquote><p>Redis 有序集合和集合一样也是string类型元素的集合,且不允许重复的成员。</p><p>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</p><p>有序集合的成员是唯一的,但分数(score)却可以重复。</p><p>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。 集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p></blockquote><h2 id="第一节-实例-1"><a href="#第一节-实例-1" class="headerlink" title="第一节 实例"></a>第一节 实例</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZADD runoobkey <span class="number">1</span> redis</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZADD runoobkey <span class="number">2</span> mongodb</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZADD runoobkey <span class="number">3</span> mysql</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZADD runoobkey <span class="number">3</span> mysql</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZADD runoobkey <span class="number">4</span> mysql</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line">redis <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ZRANGE runoobkey <span class="number">0</span> <span class="number">10</span> WITHSCORES</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>) <span class="string">"redis"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"1"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"mongodb"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"2"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"mysql"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"4"</span></span><br></pre></td></tr></table></figure><blockquote><p>在以上实例中我们通过命令 <strong>ZADD</strong> 向 redis 的有序集合中添加了三个值并关联上分数。</p></blockquote><h2 id="第二节-有序集合命令"><a href="#第二节-有序集合命令" class="headerlink" title="第二节 有序集合命令"></a>第二节 有序集合命令</h2><blockquote><p>下表列出了 redis 有序集合的基本命令:</p></blockquote><table><thead><tr><th>序号</th><th>命令及描述</th></tr></thead><tbody><tr><td>1</td><td><a href="http://www.runoob.com/redis/sorted-sets-zadd.html" target="_blank" rel="noopener">ZADD key score1 member1 [score2 member2]</a> 向有序集合添加一个或多个成员，或者更新已存在成员的分数</td></tr><tr><td>2</td><td><a href="http://www.runoob.com/redis/sorted-sets-zcard.html" target="_blank" rel="noopener">ZCARD key</a> 获取有序集合的成员数</td></tr><tr><td>3</td><td><a href="http://www.runoob.com/redis/sorted-sets-zcount.html" target="_blank" rel="noopener">ZCOUNT key min max</a> 计算在有序集合中指定区间分数的成员数</td></tr><tr><td>4</td><td><a href="http://www.runoob.com/redis/sorted-sets-zincrby.html" target="_blank" rel="noopener">ZINCRBY key increment member</a> 有序集合中对指定成员的分数加上增量 increment</td></tr><tr><td>5</td><td><a href="http://www.runoob.com/redis/sorted-sets-zinterstore.html" target="_blank" rel="noopener">ZINTERSTORE destination numkeys key [key …]</a> 计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</td></tr><tr><td>6</td><td><a href="http://www.runoob.com/redis/sorted-sets-zlexcount.html" target="_blank" rel="noopener">ZLEXCOUNT key min max</a> 在有序集合中计算指定字典区间内成员数量</td></tr><tr><td>7</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrange.html" target="_blank" rel="noopener">ZRANGE key start stop [WITHSCORES]</a> 通过索引区间返回有序集合成指定区间内的成员</td></tr><tr><td>8</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrangebylex.html" target="_blank" rel="noopener">ZRANGEBYLEX key min max [LIMIT offset count]</a> 通过字典区间返回有序集合的成员</td></tr><tr><td>9</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrangebyscore.html" target="_blank" rel="noopener">ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT]</a> 通过分数返回有序集合指定区间内的成员</td></tr><tr><td>10</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrank.html" target="_blank" rel="noopener">ZRANK key member</a> 返回有序集合中指定成员的索引</td></tr><tr><td>11</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrem.html" target="_blank" rel="noopener">ZREM key member [member …]</a> 移除有序集合中的一个或多个成员</td></tr><tr><td>12</td><td><a href="http://www.runoob.com/redis/sorted-sets-zremrangebylex.html" target="_blank" rel="noopener">ZREMRANGEBYLEX key min max</a> 移除有序集合中给定的字典区间的所有成员</td></tr><tr><td>13</td><td><a href="http://www.runoob.com/redis/sorted-sets-zremrangebyrank.html" target="_blank" rel="noopener">ZREMRANGEBYRANK key start stop</a> 移除有序集合中给定的排名区间的所有成员</td></tr><tr><td>14</td><td><a href="http://www.runoob.com/redis/sorted-sets-zremrangebyscore.html" target="_blank" rel="noopener">ZREMRANGEBYSCORE key min max</a> 移除有序集合中给定的分数区间的所有成员</td></tr><tr><td>15</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrevrange.html" target="_blank" rel="noopener">ZREVRANGE key start stop [WITHSCORES]</a> 返回有序集中指定区间内的成员，通过索引，分数从高到底</td></tr><tr><td>16</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrevrangebyscore.html" target="_blank" rel="noopener">ZREVRANGEBYSCORE key max min [WITHSCORES]</a> 返回有序集中指定分数区间内的成员，分数从高到低排序</td></tr><tr><td>17</td><td><a href="http://www.runoob.com/redis/sorted-sets-zrevrank.html" target="_blank" rel="noopener">ZREVRANK key member</a> 返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</td></tr><tr><td>18</td><td><a href="http://www.runoob.com/redis/sorted-sets-zscore.html" target="_blank" rel="noopener">ZSCORE key member</a> 返回有序集中，成员的分数值</td></tr><tr><td>19</td><td><a href="http://www.runoob.com/redis/sorted-sets-zunionstore.html" target="_blank" rel="noopener">ZUNIONSTORE destination numkeys key [key …]</a> 计算给定的一个或多个有序集的并集，并存储在新的 key 中</td></tr><tr><td>20</td><td><a href="http://www.runoob.com/redis/sorted-sets-zscan.html" target="_blank" rel="noopener">ZSCAN key cursor [MATCH pattern] [COUNT count]</a> 迭代有序集合中的元素（包括元素成员和元素分值）</td></tr></tbody></table></div><footer class="article-footer"><a data-url="http://www.JiShuXuePai.com/tech/redis/notes.html" data-id="cjhjwtjqa004hdzfyakgl2xaq" class="article-share-link"><i class="fa fa-share"></i>分享到</a><script>!function(n){n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),r=encodeURIComponent(o),i="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+i).length){if((e=n("#"+i)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")})}(jQuery)</script></footer></div></article><section id="comments"><div id="gitalk_frame"></div></section></div></section><aside id="sidebar"><a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a><div class="sidebar-top"><p>关注我 :</p><ul class="social-links"><li><a class="social-tooltip" title="火星时代" href="http://edu.hxsd.com/edunew/topics/webfull/index.html" target="_blank"><i class="icon fa fa-dribbble"></i></a></li><li><a class="social-tooltip" title="weibo" href="#" target="_blank"><i class="icon fa fa-weibo"></i></a></li><li><a class="social-tooltip" title="rss" href="/atom.xml" target="_blank"><i class="icon fa fa-rss"></i></a></li></ul></div><div class="widgets-container"><link rel="stylesheet" href="/css/tech/technology.css"><div class="widget-wrap widget-list"><div class="widget"><dl class="technology"><dt><img src="/assets/images/tech/redis.png"></dt><dd><p>Redis非关系数据库</p><div class="notes"><a href="/tech/redis/notes.html">教学讲义</a></div><div class="row"><div class="col-4 change_blue"><a href="/tech/redis/case.html">3<br>案例</a></div><div class="col-4 plan"><a href="##">10<br>核心知识</a></div><div class="col-4 plan"><a href="##">10<br>文章</a></div></div><div class="row"><div class="col-6 plan"><a href="##">教学计划</a></div><div class="col-6"><a href="/tech/redis/relative.html">相关资料</a></div></div></dd></dl></div></div><link rel="stylesheet" href="/css/tech/toc.css"><div class="widget-wrap widget-list widget-toc"><h3 class="widget-title">目录</h3><div class="widget"><div class="toc"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/3.0.5/tocbot.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/3.0.5/tocbot.min.js"></script><script>$(function(){$(".main-body-content").find("h1,h2,h3").each(function(t){$(this).attr("id")||$(this).attr("id","list"+t)}),tocbot.init({tocSelector:".toc",contentSelector:".main-body-content",headingSelector:"h1, h2, h3",collapseDepth:2,positionFixedSelector:".widget-toc",fixedSidebarOffset:595,includeHtml:!1})})</script></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">链接</h3><div class="widget"><ul><li><a href="http://edu.hxsd.com/edunew/topics/webfull/index.html">火星时代</a></li></ul></div></div></div></aside><script>$(function(){$(window).scroll(function(){240<=$(document).scrollTop()?($("#sidebar .sidebar-toggle").addClass("fix"),"block"==$("#sidebar .sidebar-toggle").css("display")&&$(".is-position-fixed").css("top","35px")):$("#sidebar .sidebar-toggle").removeClass("fix")})})</script></div></div></div><footer id="footer"><div class="top"><div class="inner"><div class="list"><div class="left clearfix"><dl><dt>关于我们</dt><dd><a href="/about.html" target="_blank">公司简介</a></dd><dd><a href="edu/index.html" target="_blank">联系我们</a></dd></dl><dl><dt>校区攻略</dt><dd><a href="edu/index.html" target="_blank">校区环境</a></dd><dd><a href="edu/index.html" target="_blank">住宿攻略</a></dd><dd><a href="edu/index.html" target="_blank">来校路线</a></dd></dl><dl><dt>课程培训</dt><dd><a href="edu/python.html" target="_blank">Python</a></dd><dd><a href="edu/python.html" target="_blank">Web前端</a></dd><dd><a href="edu/python.html" target="_blank">PHP</a></dd><dd><a href="edu/python.html" target="_blank">人工智能</a></dd><dd><a href="edu/python.html" target="_blank">大数据</a></dd></dl><dl><dt>常见问答</dt><dd><a href="edu/index.html" target="_blank">学费学时</a></dd><dd><a href="edu/index.html" target="_blank">学习方法</a></dd></dl></div></div><div class="tel"><img src="css/images/phone.png"><tel>176-0025-8815</tel><span>北京市海淀区杏石口路81号火星时代大厦</span></div><div class="weixin"><div class="w1"><img src="css/images/toutiao.jpeg"> <span>头条号</span></div><div class="w1"><img src="css/images/weixin.jpg"> <span>官方微信</span></div></div></div></div><div class="bot">Copyright 2018 技术学派 京ICP备15015508号-3</div></footer><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk=new Gitalk({clientID:"2fbbb9980b49019d99a7",clientSecret:"152dd10e83ef6595761ea2185304f9ac8263573f",repo:"jsxp",owner:"li-kang",admin:["li-kang"]});gitalk.render("gitalk_frame")</script><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="/js/main.js"></script></div></body>