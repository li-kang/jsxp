<!DOCTYPE html><html><head><meta charset="utf-8"><title>教学讲义 | 技术学派</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="IT培训, Python, 大数据, 人工智能, Web前端, PHP, "><meta name="description" content="第一章 简介Laravel框架和ThinkPHP一样，也是一款好用的，而且是流行于世界的开发框架！最显著的特点就是它支持数据库迁移的这一大优点！值得我们每个人都来学习一下！这也是我们为何要学习这款框架的原因！第一节 准备因为该框架比较特殊，我们需要首先将环境配置好，才能够保证下载下来的框架不会有什么问题。1. 需要检查PHP版本 &amp;gt; 5.5.9Mcrypt PHP 扩展openssl扩展mb"><meta property="og:type" content="website"><meta property="og:title" content="教学讲义"><meta property="og:url" content="http://www.JiShuXuePai.com/tech/laravel/notes.html"><meta property="og:site_name" content="技术学派"><meta property="og:description" content="第一章 简介Laravel框架和ThinkPHP一样，也是一款好用的，而且是流行于世界的开发框架！最显著的特点就是它支持数据库迁移的这一大优点！值得我们每个人都来学习一下！这也是我们为何要学习这款框架的原因！第一节 准备因为该框架比较特殊，我们需要首先将环境配置好，才能够保证下载下来的框架不会有什么问题。1. 需要检查PHP版本 &amp;gt; 5.5.9Mcrypt PHP 扩展openssl扩展mb"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2018-05-11T08:14:17.762Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="教学讲义"><meta name="twitter:description" content="第一章 简介Laravel框架和ThinkPHP一样，也是一款好用的，而且是流行于世界的开发框架！最显著的特点就是它支持数据库迁移的这一大优点！值得我们每个人都来学习一下！这也是我们为何要学习这款框架的原因！第一节 准备因为该框架比较特殊，我们需要首先将环境配置好，才能够保证下载下来的框架不会有什么问题。1. 需要检查PHP版本 &amp;gt; 5.5.9Mcrypt PHP 扩展openssl扩展mb"><link rel="stylesheet" href="/libs/bootstrap/bootstrap-grid.css"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/titillium-web/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/jquery.min.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?4c1bd812de3c30edbaa2b803c66f0a04";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head></html><body><div id="wrap"><header id="header"><div id="header-outer" class="outer"><div class="container"><div class="container-inner"><div id="header-title"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1></div><div id="header-inner" class="nav-container"><a id="main-nav-toggle" class="nav-icon fa fa-bars">菜单</a><div class="nav-container-inner"><ul id="main-nav"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/">主页</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/edu/index.html">学编程</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/blog/">博客</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/nav.html">网站导航</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/tips.html">学习建议</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/about.html">关于</a></li></ul><nav id="sub-nav"><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="搜索"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></nav></div></div></div></div></div></header><div class="container"><div class="main-body container-inner"><div class="main-body-inner"><section id="main"><div class="main-body-header"><h1 class="header"><em class="page-title-link" data-url="/tech/laravel/notes.html">教学讲义</em><div class="author">袁晓飞</div></h1></div><div class="main-body-content"><article id="page-" class="article article-single article-type-page" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">教学讲义</h1></header><div class="article-entry" itemprop="articleBody"><h1 id="第一章-简介"><a href="#第一章-简介" class="headerlink" title="第一章 简介"></a>第一章 简介</h1><blockquote><p>Laravel框架和ThinkPHP一样，也是一款好用的，而且是流行于世界的开发框架！最显著的特点就是它支持数据库迁移的这一大优点！值得我们每个人都来学习一下！这也是我们为何要学习这款框架的原因！</p></blockquote><h2 id="第一节-准备"><a href="#第一节-准备" class="headerlink" title="第一节 准备"></a>第一节 准备</h2><blockquote><p>因为该框架比较特殊，我们需要首先将环境配置好，才能够保证下载下来的框架不会有什么问题。</p></blockquote><h3 id="1-需要检查"><a href="#1-需要检查" class="headerlink" title="1. 需要检查"></a>1. 需要检查</h3><ul><li>PHP版本 &gt; 5.5.9</li><li>Mcrypt PHP 扩展</li><li>openssl扩展</li><li>mbstring 扩展</li><li>Tokenizer PHP 扩展</li></ul><blockquote><p>保证上述拓展都正确配置之后，才能进入第二节哦！可以在phpinfo.php当中来进行查看。</p></blockquote><h2 id="第二节-安装"><a href="#第二节-安装" class="headerlink" title="第二节 安装"></a>第二节 安装</h2><blockquote><p>要想使用这个框架，当然少不了的就是先将其下载下载，并且进行安装</p></blockquote><h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h3><blockquote><p>我们可以通过Composer将Laravel框架下载下来，Composer的好处就在于，它可以选择框架的版本号，而且都是最完整的安装。</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Composer create-project laravel/laravel your-project-name --prefer-dist 版本号</span><br></pre></td></tr></table></figure><blockquote><p>注意，安装时要在选定好的目录下进行安装，以保证我们可以准确的操作正确的目录</p></blockquote><h1 id="第二章-配置"><a href="#第二章-配置" class="headerlink" title="第二章 配置"></a>第二章 配置</h1><blockquote><p>学习任何一个框架，都应当从配置开始，配置完善的框架，更以开发和调控，Laravel也不例外，下面让我们一起来看一下，它需要经过哪些调整吧。</p></blockquote><h2 id="第一节-开发前"><a href="#第一节-开发前" class="headerlink" title="第一节 开发前"></a>第一节 开发前</h2><ul><li>需要保证Storage和vendor目录具有写入权限，当然这只是局限于Linux系统或Unix系统</li><li>保证env文件中的 <strong>APP_KEY</strong> 调试正确，可以采用 <strong>php artisan key:generate</strong> 命令进行创建或重新生成</li><li>修改app.php中的时区设置为PRC，中华人民共和国时区</li></ul><h2 id="第二节-开发中"><a href="#第二节-开发中" class="headerlink" title="第二节 开发中"></a>第二节 开发中</h2><ul><li><p>读取和设置配置</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Config::get(<span class="string">'app.timezone'</span>);</span><br><span class="line">Config::set(<span class="string">'app.locale'</span>, <span class="string">'cn'</span>);</span><br></pre></td></tr></table></figure></li><li><p>获取env环境配置</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env(<span class="string">'DB_HOST'</span>)</span><br></pre></td></tr></table></figure></li><li><p>关闭和启动应用</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关闭应用</span></span><br><span class="line">php artisan down</span><br><span class="line"><span class="comment">//启动应用</span></span><br><span class="line">php aritsan up</span><br></pre></td></tr></table></figure></li><li><p>URL重写</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//apache下配置</span></span><br><span class="line"><span class="comment">//在网站根目录下创建.htaccess文件</span></span><br><span class="line">Options +FollowSymLinks</span><br><span class="line">RewriteEngine On</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteRule ^ index.php [L]</span><br></pre></td></tr></table></figure></li></ul><h1 id="第三章-路由"><a href="#第三章-路由" class="headerlink" title="第三章 路由"></a>第三章 路由</h1><blockquote><p>路由，是Laravel非常重要的一块内容，因为每一个方法的操作都必须要经过路由，才能执行，这是必须要通过的一条路，所以一定要对它有较深的理解才能够保证我们后续的学习更加顺畅！</p></blockquote><h2 id="第一节-位置"><a href="#第一节-位置" class="headerlink" title="第一节 位置"></a>第一节 位置</h2><h3 id="1-路径"><a href="#1-路径" class="headerlink" title="1. 路径"></a>1. 路径</h3><ul><li>app/Http/routes.php</li></ul><h2 id="第二节-基本路由"><a href="#第二节-基本路由" class="headerlink" title="第二节 基本路由"></a>第二节 基本路由</h2><blockquote><p>最常用的两种路由访问方式，分别是get和post请求访问，put、delete都是不常用的方法，因此我们不做详细讲解。</p></blockquote><h3 id="1-get请求"><a href="#1-get请求" class="headerlink" title="1. get请求"></a>1. get请求</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/test'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  代码内容;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>注意：上述路由只能通过URL的GET方式进行访问</p></blockquote><h3 id="2-post请求"><a href="#2-post请求" class="headerlink" title="2. post请求"></a>2. post请求</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::post(<span class="string">'/insert'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  代码内容;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="第三节-带参数的路由"><a href="#第三节-带参数的路由" class="headerlink" title="第三节 带参数的路由"></a>第三节 带参数的路由</h2><blockquote><p>我们在通过路由请求方法时，当然不只是打开页面这么简单，我们通常还有传递参数的时候，下面让我们看一下各种请求方式传递参数的方法。</p></blockquote><h3 id="1-普通方式"><a href="#1-普通方式" class="headerlink" title="1. 普通方式"></a>1. 普通方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/goods/&#123;id&#125;'</span>, <span class="function"><span class="keyword">function</span><span class="params">($id)</span></span>&#123;</span><br><span class="line">	<span class="keyword">echo</span> $id;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-限制参数类型"><a href="#2-限制参数类型" class="headerlink" title="2. 限制参数类型"></a>2. 限制参数类型</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/param/&#123;name&#125;'</span>, <span class="function"><span class="keyword">function</span><span class="params">($name)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $name;</span><br><span class="line">&#125;)-&gt;where(<span class="string">'name'</span>,<span class="string">'[a-z]+'</span>);</span><br></pre></td></tr></table></figure><h3 id="3-传递多个参数"><a href="#3-传递多个参数" class="headerlink" title="3. 传递多个参数"></a>3. 传递多个参数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/getParams/&#123;name&#125;-&#123;id&#125;'</span>, <span class="function"><span class="keyword">function</span><span class="params">($name, $id)</span></span>&#123;</span><br><span class="line">    <span class="comment">//请求对象</span></span><br><span class="line">    <span class="comment">// echo $request-&gt;route('name');</span></span><br><span class="line">    <span class="comment">// echo $request-&gt;route('id');</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="第四节-路由别名"><a href="#第四节-路由别名" class="headerlink" title="第四节 路由别名"></a>第四节 路由别名</h2><blockquote><p>某些时候，我们需要获取路由完整路径信息，但是开发中可能出现的一个问题就是，路径信息过长，导致我们在书写路径时很尴尬，因此我们可以采用路由笔名的方式省去书写的繁琐。</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/Home/Goods/show/&#123;id&#125;'</span>, [<span class="string">'as'</span>=&gt;<span class="string">'goods'</span>, <span class="function"><span class="keyword">function</span><span class="params">($id)</span></span>&#123;</span><br><span class="line">    <span class="comment">//普通创建url</span></span><br><span class="line">    <span class="comment">// echo url('/param/hahah').'&lt;br&gt;';</span></span><br><span class="line">    <span class="comment">//路由别名创建url</span></span><br><span class="line">    <span class="comment">// echo route('goods',['id'=&gt;11]).'&lt;br&gt;';</span></span><br><span class="line">    <span class="comment">//实现页面跳转</span></span><br><span class="line">    <span class="comment">// return redirect()-&gt;route('goods',['id'=&gt;12]);</span></span><br><span class="line">    <span class="comment">//获取路由名称</span></span><br><span class="line">    <span class="keyword">return</span> Route::currentRouteName();</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure><h2 id="第五节-路由组"><a href="#第五节-路由组" class="headerlink" title="第五节 路由组"></a>第五节 路由组</h2><blockquote><p>若没有路由组这一方便的使用方式，我们的路由文件将显得非常之混乱，很有可能导致我们无法区分前后台的路由信息，现在有了路由组，给我们解决了这个问题，一起来看一下吧！</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Route::group([], <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Route::get(<span class="string">'/404'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        abort(<span class="number">404</span>,<span class="string">'not found!!!'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>路由组中间的数组，是用来存储中间件！</p></blockquote><h3 id="1-404界面"><a href="#1-404界面" class="headerlink" title="1. 404界面"></a>1. 404界面</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abort(<span class="number">404</span>,<span class="string">'么有找到相关的页面呀!!!'</span>);</span><br></pre></td></tr></table></figure><h2 id="第六节-CSRF保护"><a href="#第六节-CSRF保护" class="headerlink" title="第六节 CSRF保护"></a>第六节 CSRF保护</h2><blockquote><p>相信写到这里，很多同学遇到了一些问题，例如，通过表单提交post请求时会报错的情况，这是因为Laravel给我们准备的一套预防跨域攻击的方法，我们只需要进行下面的操作即可完成post提交的操作。</p></blockquote><h3 id="1-普通方式-1"><a href="#1-普通方式-1" class="headerlink" title="1. 普通方式"></a>1. 普通方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> csrf_field(); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-推荐方式"><a href="#2-推荐方式" class="headerlink" title="2. 推荐方式"></a>2. 推荐方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;!! csrf_field() !!&#125;</span><br></pre></td></tr></table></figure><h3 id="3-自动解析"><a href="#3-自动解析" class="headerlink" title="3. 自动解析"></a>3. 自动解析</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"hidden"</span> name=<span class="string">"_token"</span> value=<span class="string">"&lt;?php echo csrf_token(); ?&gt;"</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="第四章-中间件"><a href="#第四章-中间件" class="headerlink" title="第四章 中间件"></a>第四章 中间件</h1><blockquote><p>中间件，其实就是一个用于做筛选和过滤的，过滤什么呢？例如，一个后台用户想要进行一下网站后台的管理，这个时候，我们就需要做一下判断，该用户是否已经登录了？若没有登录，我们就需要让其跳转到登录页，进行登录之后才能管理，这个判断就可以使用中间件来做。</p></blockquote><h2 id="第一节-创建"><a href="#第一节-创建" class="headerlink" title="第一节 创建"></a>第一节 创建</h2><h3 id="1-命令"><a href="#1-命令" class="headerlink" title="1. 命令"></a>1. 命令</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:middleware LoginMiddleware</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Middleware</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Closure</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginMiddleware</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">($request, Closure $next)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//request变量 记录所有的请求参数</span></span><br><span class="line">        <span class="keyword">if</span>(!$request-&gt;cookie(<span class="string">'uid'</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">'/'</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> $next($request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第二节-注册"><a href="#第二节-注册" class="headerlink" title="第二节 注册"></a>第二节 注册</h2><h3 id="1-全局注册"><a href="#1-全局注册" class="headerlink" title="1. 全局注册"></a>1. 全局注册</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Kernel.php &gt;&gt;&gt;&gt;  $middleware成员属性</span><br><span class="line"><span class="keyword">protected</span> $middleware = [</span><br><span class="line">        \Illuminate\Foundation\Http\Middleware\CheckForMaintenanceMode::class,</span><br><span class="line">        \app\Http\Middleware\TestMiddleware::class</span><br><span class="line">    ];</span><br></pre></td></tr></table></figure><h3 id="2-路由注册"><a href="#2-路由注册" class="headerlink" title="2. 路由注册"></a>2. 路由注册</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Kernel.php &gt;&gt;&gt;&gt; $routeMiddleware成员属性</span><br><span class="line"><span class="keyword">protected</span> $routeMiddleware = [</span><br><span class="line">        <span class="string">'auth'</span> =&gt; \app\Http\Middleware\Authenticate::class,</span><br><span class="line">        <span class="string">'auth.basic'</span> =&gt; \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,</span><br><span class="line">        <span class="string">'can'</span> =&gt; \Illuminate\Foundation\Http\Middleware\Authorize::class,</span><br><span class="line">        <span class="string">'guest'</span> =&gt; \app\Http\Middleware\RedirectIfAuthenticated::class,</span><br><span class="line">        <span class="string">'throttle'</span> =&gt; \Illuminate\Routing\Middleware\ThrottleRequests::class,</span><br><span class="line">        <span class="string">'test'</span> =&gt; \app\Http\Middleware\TestMiddleware::class,</span><br><span class="line">    ];</span><br></pre></td></tr></table></figure><h2 id="第三节-使用"><a href="#第三节-使用" class="headerlink" title="第三节 使用"></a>第三节 使用</h2><h3 id="1-通过别名"><a href="#1-通过别名" class="headerlink" title="1. 通过别名"></a>1. 通过别名</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/middle'</span>, [</span><br><span class="line">    <span class="string">'middleware'</span>=&gt;<span class="string">'test'</span>, </span><br><span class="line">    <span class="string">'uses'</span>=&gt;<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'iloveyou'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h3 id="2-连贯操作"><a href="#2-连贯操作" class="headerlink" title="2. 连贯操作"></a>2. 连贯操作</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/mm'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'mm'</span>;</span><br><span class="line">&#125;)-&gt;middleware(<span class="string">'test'</span>);</span><br></pre></td></tr></table></figure><h3 id="3-路由组设置"><a href="#3-路由组设置" class="headerlink" title="3.路由组设置"></a>3.路由组设置</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Route::group([<span class="string">'middleware'</span>=&gt;<span class="string">'login'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Route::get(<span class="string">'/index'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> view(<span class="string">'Home/index'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="第五章-控制器"><a href="#第五章-控制器" class="headerlink" title="第五章 控制器"></a>第五章 控制器</h1><h2 id="第一节-创建控制器"><a href="#第一节-创建控制器" class="headerlink" title="第一节 创建控制器"></a>第一节 创建控制器</h2><blockquote><p>这里要注意，前后台模块如果在不同的目录，则需要制定目录路径</p></blockquote><h3 id="1-命令-1"><a href="#1-命令-1" class="headerlink" title="1. 命令"></a>1. 命令</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:controller UserController</span><br></pre></td></tr></table></figure><h2 id="第二节-路由访问"><a href="#第二节-路由访问" class="headerlink" title="第二节 路由访问"></a>第二节 路由访问</h2><blockquote><p>这里的路由访问形式有不同的几种方式，我们建议大家使用隐式控制器的形式，这种方式比较符合我们使用的习惯，当然大家也可以采用其他的几种方式。</p></blockquote><h3 id="1-普通访问"><a href="#1-普通访问" class="headerlink" title="1. 普通访问"></a>1. 普通访问</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/User/add'</span>, <span class="string">'UserController@add'</span>);</span><br></pre></td></tr></table></figure><h3 id="2-带参数的访问"><a href="#2-带参数的访问" class="headerlink" title="2. 带参数的访问"></a>2. 带参数的访问</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/User/edit/&#123;id&#125;'</span>, <span class="string">'UserController@edit'</span>);</span><br></pre></td></tr></table></figure><h3 id="3-控制器别名的使用"><a href="#3-控制器别名的使用" class="headerlink" title="3. 控制器别名的使用"></a>3. 控制器别名的使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">设置：Route::get(<span class="string">'/User/index'</span>, [<span class="string">'uses'</span> =&gt; <span class="string">'UserController@index'</span>,<span class="string">'as'</span> =&gt; <span class="string">'user'</span>]);</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：route(<span class="string">'user'</span>)	<span class="comment">// /User/index</span></span><br></pre></td></tr></table></figure><h3 id="4-中间件控制"><a href="#4-中间件控制" class="headerlink" title="4. 中间件控制"></a>4. 中间件控制</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/user/edit/&#123;id&#125;'</span>, [</span><br><span class="line">	<span class="string">'middleware'</span> =&gt; <span class="string">'login'</span>,</span><br><span class="line">	<span class="string">'uses'</span> =&gt; <span class="string">'TestController@edit'</span>]</span><br><span class="line">	);</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/user/edit/&#123;id&#125;'</span>, <span class="string">'TestController@edit'</span>)-&gt;middleware(<span class="string">'login'</span>);</span><br></pre></td></tr></table></figure><h3 id="5-隐式控制器"><a href="#5-隐式控制器" class="headerlink" title="5. 隐式控制器"></a>5. 隐式控制器</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::controller(<span class="string">'users'</span>, <span class="string">'UserController'</span>);</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 响应／users的GET请求</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getIndex</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 响应／users／show／1的GET请求</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getShow</span><span class="params">($id)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>需要注意的一点是，使用隐式控制器，必须要争控制器类中所有方法前方加上请求方式，否则将导致该方法无法进行访问！</p></blockquote><h1 id="第六章-请求"><a href="#第六章-请求" class="headerlink" title="第六章 请求"></a>第六章 请求</h1><blockquote><p>本章节，我们将学习Laravel请求中可能会遇到的一些问题，并且学习Laravel请求时的一些技巧。</p></blockquote><h2 id="第一节-基本获取"><a href="#第一节-基本获取" class="headerlink" title="第一节 基本获取"></a>第一节 基本获取</h2><h3 id="1-请求路径"><a href="#1-请求路径" class="headerlink" title="1. 请求路径"></a>1. 请求路径</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;path()</span><br></pre></td></tr></table></figure><h3 id="2-检测路径"><a href="#2-检测路径" class="headerlink" title="2. 检测路径"></a>2. 检测路径</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;is(<span class="string">'admin/*'</span>)</span><br></pre></td></tr></table></figure><h3 id="3-检测完整url路由"><a href="#3-检测完整url路由" class="headerlink" title="3. 检测完整url路由"></a>3. 检测完整url路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;url();</span><br></pre></td></tr></table></figure><h3 id="4-获取请求方法"><a href="#4-获取请求方法" class="headerlink" title="4. 获取请求方法"></a>4. 获取请求方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;method();</span><br></pre></td></tr></table></figure><h3 id="5-检测方法"><a href="#5-检测方法" class="headerlink" title="5. 检测方法"></a>5. 检测方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;isMethod(<span class="string">'post'</span>)</span><br></pre></td></tr></table></figure><h2 id="第二节-提取请求参数"><a href="#第二节-提取请求参数" class="headerlink" title="第二节 提取请求参数"></a>第二节 提取请求参数</h2><blockquote><p>本节主要需要大家掌握对于表单提交内容的多种获取方式</p></blockquote><h3 id="1-基本获取"><a href="#1-基本获取" class="headerlink" title="1. 基本获取"></a>1. 基本获取</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$name = $request-&gt;input(<span class="string">'name'</span>);</span><br></pre></td></tr></table></figure><h3 id="2-获取指定类型信息"><a href="#2-获取指定类型信息" class="headerlink" title="2. 获取指定类型信息"></a>2. 获取指定类型信息</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\Input::get(<span class="string">'id'</span>);</span><br></pre></td></tr></table></figure><h3 id="3-设置默认值"><a href="#3-设置默认值" class="headerlink" title="3. 设置默认值"></a>3. 设置默认值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;input(<span class="string">'name'</span>, <span class="string">'Sally'</span>);</span><br></pre></td></tr></table></figure><h3 id="4-检测是否存在"><a href="#4-检测是否存在" class="headerlink" title="4. 检测是否存在"></a>4. 检测是否存在</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;has(<span class="string">'name'</span>)</span><br></pre></td></tr></table></figure><h3 id="5-提取所有"><a href="#5-提取所有" class="headerlink" title="5. 提取所有"></a>5. 提取所有</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$input = $request-&gt;all();</span><br></pre></td></tr></table></figure><h3 id="6-提取部分"><a href="#6-提取部分" class="headerlink" title="6. 提取部分"></a>6. 提取部分</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">选定字段：$request-&gt;only([<span class="string">'username'</span>, <span class="string">'password'</span>]);</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">排除字段：$request-&gt;except([<span class="string">'credit_card'</span>]);</span><br></pre></td></tr></table></figure><h3 id="第三节-闪存信息"><a href="#第三节-闪存信息" class="headerlink" title="第三节 闪存信息"></a>第三节 闪存信息</h3><blockquote><p>在某些时候，我们提交的信息可能会出现问题，出现问题之后的表单必定要进行重新加载，此时可能会出现一种问题，就是表单的内容不存在了，因此，Laravel给我们准备了闪存信息的方法。</p></blockquote><h3 id="1-存取所有"><a href="#1-存取所有" class="headerlink" title="1.存取所有"></a>1.存取所有</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;flash()</span><br></pre></td></tr></table></figure><h3 id="2-存取部分"><a href="#2-存取部分" class="headerlink" title="2. 存取部分"></a>2. 存取部分</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;flashOnly(<span class="string">'title'</span>,<span class="string">'price'</span>)</span><br></pre></td></tr></table></figure><h3 id="3-排除存取"><a href="#3-排除存取" class="headerlink" title="3. 排除存取"></a>3. 排除存取</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;flashExcept(<span class="string">'_token'</span>);</span><br></pre></td></tr></table></figure><h3 id="4-简要使用"><a href="#4-简要使用" class="headerlink" title="4. 简要使用"></a>4. 简要使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> back()-&gt;withInput();</span><br></pre></td></tr></table></figure><h2 id="第四节-文件操作"><a href="#第四节-文件操作" class="headerlink" title="第四节 文件操作"></a>第四节 文件操作</h2><blockquote><p>若表单中提交了文件信息，则文件信息的获取也是比较特殊的，我们需要掌握两个方法，即可完成文件的上环移动。</p></blockquote><h3 id="1-检测文件"><a href="#1-检测文件" class="headerlink" title="1. 检测文件"></a>1. 检测文件</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;hasFile(<span class="string">'photo'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>注意：括号内的信息是input表单项对应的内容。</p></blockquote><h3 id="2-执行上传"><a href="#2-执行上传" class="headerlink" title="2. 执行上传"></a>2. 执行上传</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$request-&gt;file(<span class="string">'photo'</span>)-&gt;move(<span class="string">'./uploads/'</span>, <span class="string">'iloveyou.jpg'</span>);</span><br></pre></td></tr></table></figure><h2 id="第五节-Cookie操作"><a href="#第五节-Cookie操作" class="headerlink" title="第五节 Cookie操作"></a>第五节 Cookie操作</h2><blockquote><p>Laravel当中，Cookie的操作，我们可以采用原生的$_COOKIE方式，也可以采用框架为我们准备好的可加密Cookie信息的使用方式。</p></blockquote><h3 id="1-设置"><a href="#1-设置" class="headerlink" title="1. 设置"></a>1. 设置</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line">\Cookie::queue(<span class="string">'name'</span>,<span class="string">'iloveyou'</span>,<span class="number">10</span>);</span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line"><span class="keyword">return</span> response(<span class="string">'haha'</span>)-&gt;withCookie(<span class="string">'uid'</span>,<span class="number">10</span>,<span class="number">10</span>);</span><br></pre></td></tr></table></figure><h3 id="2-读取"><a href="#2-读取" class="headerlink" title="2. 读取"></a>2. 读取</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line">$request-&gt;cookie(<span class="string">'name'</span>);</span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line">\Cookie::get(<span class="string">'name'</span>);</span><br></pre></td></tr></table></figure><h1 id="第七章-响应"><a href="#第七章-响应" class="headerlink" title="第七章 响应"></a>第七章 响应</h1><blockquote><p>看过请求信息的各种方式之后，我们就可以来看一下服务器给客户端响应信息的一些注意事项了。</p></blockquote><h2 id="第一节-响应信息"><a href="#第一节-响应信息" class="headerlink" title="第一节 响应信息"></a>第一节 响应信息</h2><h3 id="1-返回字符串"><a href="#1-返回字符串" class="headerlink" title="1. 返回字符串"></a>1. 返回字符串</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">'哈哈哈'</span>;</span><br></pre></td></tr></table></figure><h3 id="2-返回内容同时设置cookie"><a href="#2-返回内容同时设置cookie" class="headerlink" title="2. 返回内容同时设置cookie"></a>2. 返回内容同时设置cookie</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> response(<span class="string">''</span>)-&gt;withCookie(<span class="string">'id'</span>,<span class="number">20</span>,<span class="number">60</span>);</span><br></pre></td></tr></table></figure><h3 id="3-返回模板"><a href="#3-返回模板" class="headerlink" title="3. 返回模板"></a>3. 返回模板</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> view(<span class="string">'goods.add'</span>);</span><br></pre></td></tr></table></figure><h3 id="4-返回Json信息"><a href="#4-返回Json信息" class="headerlink" title="4. 返回Json信息"></a>4. 返回Json信息</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> response()-&gt;json([<span class="string">'a'</span>=&gt;<span class="number">100</span>,<span class="string">'b'</span>=&gt;<span class="number">2000</span>]);</span><br></pre></td></tr></table></figure><h3 id="5-下载文件"><a href="#5-下载文件" class="headerlink" title="5. 下载文件"></a>5. 下载文件</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> response()-&gt;download(<span class="string">'web.config'</span>);</span><br></pre></td></tr></table></figure><h3 id="6-跳转页面"><a href="#6-跳转页面" class="headerlink" title="6. 跳转页面"></a>6. 跳转页面</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">'/goods/add'</span>);</span><br></pre></td></tr></table></figure><h1 id="第八章-视图"><a href="#第八章-视图" class="headerlink" title="第八章 视图"></a>第八章 视图</h1><blockquote><p>Laravel使用的视图和ThinkPHP不尽相同，但是解析视图模板的流程大致一样，Laravel使用了自己独有的blade视图模板，我们只需要掌握其使用方式即可。</p></blockquote><h2 id="第一节-解析模板"><a href="#第一节-解析模板" class="headerlink" title="第一节 解析模板"></a>第一节 解析模板</h2><blockquote><p>解析模板的方式刚才我们在上述章节当中我们已经学习过了，直接使用return的方式将内容解析到模板上面即可！</p></blockquote><h3 id="1-解析方式"><a href="#1-解析方式" class="headerlink" title="1. 解析方式"></a>1. 解析方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> view(<span class="string">'User/index'</span>);</span><br></pre></td></tr></table></figure><h2 id="第二节-分配数据"><a href="#第二节-分配数据" class="headerlink" title="第二节 分配数据"></a>第二节 分配数据</h2><blockquote><p>本节我们学习如何在Laravel中将数据压入模板当中。</p></blockquote><h3 id="1-分配方式"><a href="#1-分配方式" class="headerlink" title="1. 分配方式"></a>1. 分配方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> view(<span class="string">'User/edit'</span>,[<span class="string">'name'</span>=&gt;<span class="string">'张三'</span>]);</span><br></pre></td></tr></table></figure><h2 id="第三节-模板引擎的使用"><a href="#第三节-模板引擎的使用" class="headerlink" title="第三节 模板引擎的使用"></a>第三节 模板引擎的使用</h2><blockquote><p>本节我们主要来看blade模板，了解blade模板当中可以放置的内容以及特别注意事项。</p></blockquote><h3 id="1-模板存放位置"><a href="#1-模板存放位置" class="headerlink" title="1. 模板存放位置"></a>1. 模板存放位置</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resource/view</span><br></pre></td></tr></table></figure><h3 id="2-占位符"><a href="#2-占位符" class="headerlink" title="2. 占位符"></a>2. 占位符</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//占位符</span></span><br><span class="line">@<span class="keyword">yield</span>(<span class="string">'名称'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//占位空间</span></span><br><span class="line">@section(<span class="string">'名称'</span>)</span><br><span class="line">@show</span><br></pre></td></tr></table></figure><h3 id="3-模板继承"><a href="#3-模板继承" class="headerlink" title="3. 模板继承"></a>3. 模板继承</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承模板</span></span><br><span class="line">@extends(<span class="string">'模板布局名称'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//占位符内容填充</span></span><br><span class="line">@section(<span class="string">'名称'</span>,<span class="string">'内容'</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment">//占位空间内容填充</span></span><br><span class="line">@section(<span class="string">'content'</span>)</span><br><span class="line">      <span class="keyword">new</span> contents  is here</span><br><span class="line">@endsection</span><br></pre></td></tr></table></figure><h3 id="4-模板变量的使用"><a href="#4-模板变量的使用" class="headerlink" title="4. 模板变量的使用"></a>4. 模板变量的使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需要将变量放置到双花括号中</span></span><br><span class="line">&#123;&#123;$username&#125;&#125;</span><br><span class="line">&#123;&#123;$sex&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="5-函数的使用"><a href="#5-函数的使用" class="headerlink" title="5. 函数的使用"></a>5. 函数的使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需要将php函数防止到双花括号中</span></span><br><span class="line">&#123;&#123;time()&#125;&#125;	<span class="comment">//获取时间戳</span></span><br><span class="line">&#123;&#123;substr()&#125;&#125;	<span class="comment">//字符串截取</span></span><br></pre></td></tr></table></figure><h3 id="6-设置默认值"><a href="#6-设置默认值" class="headerlink" title="6. 设置默认值"></a>6. 设置默认值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同样是在双花括号中进行书写</span></span><br><span class="line">&#123;&#123;$username <span class="keyword">or</span> <span class="string">'游客'</span>&#125;&#125;	<span class="comment">//若变量有内容，则使用变量内容，若没有内容，则使用默认值内容</span></span><br></pre></td></tr></table></figure><h3 id="7-显示html内容"><a href="#7-显示html内容" class="headerlink" title="7. 显示html内容"></a>7. 显示html内容</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同样是在花括号中，只不过是单花括号，加上叹号即可</span></span><br><span class="line">&#123;!!$username!!&#125;	<span class="comment">//此时，若变量中拥有html代码的话，可以将HTML代码的内容解析出来</span></span><br></pre></td></tr></table></figure><h3 id="8-引入子视图"><a href="#8-引入子视图" class="headerlink" title="8. 引入子视图"></a>8. 引入子视图</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入指定目录下的blade模板</span></span><br><span class="line">@<span class="keyword">include</span>(<span class="string">'header'</span>)</span><br></pre></td></tr></table></figure><h3 id="9-流程控制"><a href="#9-流程控制" class="headerlink" title="9. 流程控制"></a>9. 流程控制</h3><blockquote><p>在blade模板当中，也可以使用类似于php的分支语句</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">if</span> (count($records) === <span class="number">1</span>)</span><br><span class="line">    I have one record!</span><br><span class="line">@<span class="keyword">elseif</span> (count($records) &gt; <span class="number">1</span>)</span><br><span class="line">    I have multiple records!</span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">    I don<span class="string">'t have any records!</span></span><br><span class="line"><span class="string">@endif</span></span><br></pre></td></tr></table></figure><h3 id="10-循环控制"><a href="#10-循环控制" class="headerlink" title="10. 循环控制"></a>10. 循环控制</h3><blockquote><p>循环控制当然也不例外的可以使用！只需要掌握其技巧即可！</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for循环的使用</span></span><br><span class="line">@<span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; <span class="number">10</span>; $i++)</span><br><span class="line">    The current value is &#123;&#123; $i &#125;&#125;</span><br><span class="line">@<span class="keyword">endfor</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//foreach的使用</span></span><br><span class="line">@<span class="keyword">foreach</span> ($users <span class="keyword">as</span> $user)</span><br><span class="line">    &lt;p&gt;This is user &#123;&#123; $user-&gt;id &#125;&#125;&lt;/p&gt;</span><br><span class="line">@<span class="keyword">endforeach</span></span><br></pre></td></tr></table></figure><h1 id="第九章-数据库操作"><a href="#第九章-数据库操作" class="headerlink" title="第九章 数据库操作"></a>第九章 数据库操作</h1><blockquote><p><a href="http://laravelacademy.org/tags/laravel" target="_blank" rel="noopener">Laravel</a>让连接多种<a href="http://laravelacademy.org/tags/%e6%95%b0%e6%8d%ae%e5%ba%93" target="_blank" rel="noopener">数据库</a>和运行<a href="http://laravelacademy.org/tags/%e6%9f%a5%e8%af%a2" target="_blank" rel="noopener">查询</a>都变得非常简单，不论使用原生<a href="http://laravelacademy.org/tags/sql" target="_blank" rel="noopener">SQL</a>、还是查询构建器，还是Eloquent ORM。目前，Laravel支持四种类型的数据库系统：</p></blockquote><h2 id="第一节-支持列表"><a href="#第一节-支持列表" class="headerlink" title="第一节 支持列表"></a>第一节 支持列表</h2><ul><li>MySQL</li><li>Postgres</li><li>SQLite</li><li>SQL Server</li></ul><h2 id="第二节-数据库连接配置"><a href="#第二节-数据库连接配置" class="headerlink" title="第二节 数据库连接配置"></a>第二节 数据库连接配置</h2><h3 id="1-文件位置"><a href="#1-文件位置" class="headerlink" title="1. 文件位置"></a>1. 文件位置</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config/database.php</span><br></pre></td></tr></table></figure><h3 id="2-结果集类型设置"><a href="#2-结果集类型设置" class="headerlink" title="2. 结果集类型设置"></a>2. 结果集类型设置</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'fetch'</span> =&gt; PDO::FETCH_ASSOC</span><br></pre></td></tr></table></figure><h3 id="3-env环境快速配置"><a href="#3-env环境快速配置" class="headerlink" title="3. .env环境快速配置"></a>3. .env环境快速配置</h3><blockquote><p>若你想快捷设置，可以直接找到项目根目录下的env文件进行相应设置即可。</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DB_CONNECTION=mysql</span><br><span class="line">DB_HOST=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">DB_DATABASE=web1709</span><br><span class="line">DB_USERNAME=root</span><br><span class="line">DB_PASSWORD=<span class="number">123</span></span><br></pre></td></tr></table></figure><h2 id="第三节-数据库的基本操作"><a href="#第三节-数据库的基本操作" class="headerlink" title="第三节 数据库的基本操作"></a>第三节 数据库的基本操作</h2><blockquote><p>数据库的学习，无外乎增删改插四个操作，Laravel数据库操作的学习也是他么们几个，我我们要掌握的是它的使用方式。</p></blockquote><blockquote><p>注意，使用数据库操作，一定要导入DB类，才能使用，在控制器最上方加上 use DB 即可。</p></blockquote><h3 id="1-查询"><a href="#1-查询" class="headerlink" title="1. 查询"></a>1. 查询</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询stu表中所有的信息</span></span><br><span class="line">DB::select(<span class="string">'select * from stu'</span>);</span><br></pre></td></tr></table></figure><h3 id="2-增加"><a href="#2-增加" class="headerlink" title="2. 增加"></a>2. 增加</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//往stu表中添加信息</span></span><br><span class="line">DB::insert(<span class="string">'insert into stu values (null,"zhangsan","w",36)'</span>);</span><br></pre></td></tr></table></figure><h3 id="3-删除"><a href="#3-删除" class="headerlink" title="3. 删除"></a>3. 删除</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除stu表中id未5的数据</span></span><br><span class="line">DB::delete(<span class="string">'delete from stu where id = 5'</span>);</span><br></pre></td></tr></table></figure><h3 id="4-修改"><a href="#4-修改" class="headerlink" title="4. 修改"></a>4. 修改</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改stu表中id为10的数据的年龄为24</span></span><br><span class="line">DB::update(<span class="string">'update stu set age = 24 where id = 10'</span>);</span><br></pre></td></tr></table></figure><h3 id="5-一般语句"><a href="#5-一般语句" class="headerlink" title="5. 一般语句"></a>5. 一般语句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除stu数据表</span></span><br><span class="line">DB::statement(<span class="string">'drop table stu'</span>)</span><br></pre></td></tr></table></figure><h3 id="6-事务操作"><a href="#6-事务操作" class="headerlink" title="6. 事务操作"></a>6. 事务操作</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开启事务</span></span><br><span class="line">DB::transaction();</span><br><span class="line"><span class="comment">//执行修改语句</span></span><br><span class="line">$res = DB::update(<span class="string">'update stu set money = money - 100 where id = 10'</span>);</span><br><span class="line"><span class="comment">//判断是否修改成功</span></span><br><span class="line"><span class="keyword">if</span>(!$res)&#123;</span><br><span class="line">  DB::rollBack();</span><br><span class="line">  <span class="keyword">return</span> back();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//若执行成功，事务结束</span></span><br><span class="line">DB::commit();</span><br></pre></td></tr></table></figure><h3 id="7-操作多个数据库"><a href="#7-操作多个数据库" class="headerlink" title="7. 操作多个数据库"></a>7. 操作多个数据库</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//操作多个数据库的方法</span></span><br><span class="line">DB::connection(<span class="string">'foo'</span>)-&gt;select(...)</span><br></pre></td></tr></table></figure><h2 id="第四节-使用构造器"><a href="#第四节-使用构造器" class="headerlink" title="第四节 使用构造器"></a>第四节 使用构造器</h2><blockquote><p>数据库查询构造器提供了方便、流畅的接口，以用来创建及运行数据库查找。可用来执行应用程序中的大部分数据库操作，且能在所有被支持的数据库系统中使用。</p></blockquote><h3 id="1-增加"><a href="#1-增加" class="headerlink" title="1. 增加"></a>1. 增加</h3><h4 id="1-1-单条"><a href="#1-1-单条" class="headerlink" title="1.1 单条"></a>1.1 单条</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加单条信息到数据库</span></span><br><span class="line">DB::table()-&gt;insert(</span><br><span class="line">	[<span class="string">'email'</span> =&gt; <span class="string">'john@example.com'</span>, <span class="string">'votes'</span> =&gt; <span class="number">0</span>]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="1-2-多条"><a href="#1-2-多条" class="headerlink" title="1.2 多条"></a>1.2 多条</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加多条信息</span></span><br><span class="line">DB::table(<span class="string">'users'</span>)-&gt;insert([</span><br><span class="line">    [<span class="string">'email'</span> =&gt; <span class="string">'taylor@example.com'</span>, <span class="string">'votes'</span> =&gt; <span class="number">0</span>],</span><br><span class="line">    [<span class="string">'email'</span> =&gt; <span class="string">'dayle@example.com'</span>, <span class="string">'votes'</span> =&gt; <span class="number">0</span>]</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h4 id="1-3-获取id插入"><a href="#1-3-获取id插入" class="headerlink" title="1.3 获取id插入"></a>1.3 获取id插入</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$id = DB::table(<span class="string">'users'</span>)-&gt;insertGetId(</span><br><span class="line">    [<span class="string">'email'</span> =&gt; <span class="string">'john@example.com'</span>, <span class="string">'votes'</span> =&gt; <span class="number">0</span>]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="2-更新"><a href="#2-更新" class="headerlink" title="2. 更新"></a>2. 更新</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">            -&gt;where(<span class="string">'id'</span>, <span class="number">1</span>)</span><br><span class="line">            -&gt;update([<span class="string">'votes'</span> =&gt; <span class="number">1</span>]);</span><br></pre></td></tr></table></figure><h3 id="3-删除-1"><a href="#3-删除-1" class="headerlink" title="3. 删除"></a>3. 删除</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">  			-&gt;where(<span class="string">'votes'</span>, <span class="string">'&lt;'</span>, <span class="number">100</span>)</span><br><span class="line">  			-&gt;delete();</span><br></pre></td></tr></table></figure><h3 id="4-查询"><a href="#4-查询" class="headerlink" title="4. 查询"></a>4. 查询</h3><h4 id="4-1-查询所有"><a href="#4-1-查询所有" class="headerlink" title="4.1 查询所有"></a>4.1 查询所有</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)-&gt;get()</span><br></pre></td></tr></table></figure><h4 id="4-2-查询单条"><a href="#4-2-查询单条" class="headerlink" title="4.2 查询单条"></a>4.2 查询单条</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)-&gt;first()</span><br></pre></td></tr></table></figure><h4 id="4-3-查询单条结果中的某个字段"><a href="#4-3-查询单条结果中的某个字段" class="headerlink" title="4.3 查询单条结果中的某个字段"></a>4.3 查询单条结果中的某个字段</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'user'</span>)-&gt;value(<span class="string">'username'</span>)</span><br></pre></td></tr></table></figure><h4 id="4-4-获取一列数据"><a href="#4-4-获取一列数据" class="headerlink" title="4.4 获取一列数据"></a>4.4 获取一列数据</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'user'</span>)-&gt;lists(<span class="string">'username'</span>)</span><br></pre></td></tr></table></figure><h2 id="第五节-连贯操作"><a href="#第五节-连贯操作" class="headerlink" title="第五节 连贯操作"></a>第五节 连贯操作</h2><h3 id="1-设置字段"><a href="#1-设置字段" class="headerlink" title="1. 设置字段"></a>1. 设置字段</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)-&gt;select(<span class="string">'name'</span>, <span class="string">'email as user_email'</span>)-&gt;get()</span><br></pre></td></tr></table></figure><h3 id="2-条件操作"><a href="#2-条件操作" class="headerlink" title="2. 条件操作"></a>2. 条件操作</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询users信息中以T开头的信息</span></span><br><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">      -&gt;where(<span class="string">'name'</span>, <span class="string">'like'</span>, <span class="string">'T%'</span>)</span><br><span class="line">      -&gt;get()</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询users表中votes大于100，或name等于John的信息</span></span><br><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">      -&gt;where(<span class="string">'votes'</span>, <span class="string">'&gt;'</span>, <span class="number">100</span>)</span><br><span class="line">      -&gt;orWhere(<span class="string">'name'</span>, <span class="string">'John'</span>)</span><br><span class="line">      -&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询users表中votes字段在1到100之间的信息</span></span><br><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">      -&gt;whereBetween(<span class="string">'votes'</span>, [<span class="number">1</span>, <span class="number">100</span>])-&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询users表中id在1，2，3之中的数据</span></span><br><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">      -&gt;whereIn(<span class="string">'id'</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">      -&gt;get()</span><br></pre></td></tr></table></figure><h3 id="3-排序方式"><a href="#3-排序方式" class="headerlink" title="3. 排序方式"></a>3. 排序方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)-&gt;orderBy(<span class="string">'name'</span>, <span class="string">'desc'</span>);</span><br></pre></td></tr></table></figure><h3 id="4-分页方式"><a href="#4-分页方式" class="headerlink" title="4. 分页方式"></a>4. 分页方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)-&gt;skip(<span class="number">10</span>)-&gt;take(<span class="number">5</span>)-&gt;get();</span><br></pre></td></tr></table></figure><h3 id="5-连接表"><a href="#5-连接表" class="headerlink" title="5. 连接表"></a>5. 连接表</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DB::table(<span class="string">'users'</span>)</span><br><span class="line">            -&gt;join(<span class="string">'contacts'</span>, <span class="string">'users.id'</span>, <span class="string">'='</span>, <span class="string">'contacts.user_id'</span>)</span><br><span class="line">            -&gt;join(<span class="string">'orders'</span>, <span class="string">'users.id'</span>, <span class="string">'='</span>, <span class="string">'orders.user_id'</span>)</span><br><span class="line">            -&gt;select(<span class="string">'users.*'</span>, <span class="string">'contacts.phone'</span>, <span class="string">'orders.price'</span>)</span><br><span class="line">            -&gt;get();</span><br></pre></td></tr></table></figure><h3 id="6-计算"><a href="#6-计算" class="headerlink" title="6. 计算"></a>6. 计算</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算总数</span></span><br><span class="line">DB::table(<span class="string">'users'</span>)-&gt;count();</span><br><span class="line"></span><br><span class="line"><span class="comment">//最大值</span></span><br><span class="line">DB::table(<span class="string">'orders'</span>)-&gt;max(<span class="string">'price'</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//平均值</span></span><br><span class="line">DB::table(<span class="string">'orders'</span>)-&gt;avg(<span class="string">'price'</span>);</span><br></pre></td></tr></table></figure><h3 id="7-SQL语句记录方式"><a href="#7-SQL语句记录方式" class="headerlink" title="7. SQL语句记录方式"></a>7. SQL语句记录方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">App/Providers/AppServiceProvider.php</span><br><span class="line">boot方法中添加</span><br><span class="line">DB::listen(<span class="function"><span class="keyword">function</span><span class="params">($sql, $bindings, $time)</span></span>&#123;</span><br><span class="line">     <span class="comment">//写入sql</span></span><br><span class="line">     file_put_contents(<span class="string">'.sqls'</span>, <span class="string">"["</span>.date(<span class="string">'Y-m-d H:i:s'</span>).<span class="string">"]"</span>.$sql.<span class="string">"\r\n"</span>, FILE_APPEND);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><footer class="article-footer"><a data-url="http://www.JiShuXuePai.com/tech/laravel/notes.html" data-id="cjh70hmuh003legfy01eb8sq4" class="article-share-link"><i class="fa fa-share"></i>分享到</a><script>!function(n){n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),r=encodeURIComponent(o),i="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+i).length){if((e=n("#"+i)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")})}(jQuery)</script></footer></div></article><section id="comments"><div id="gitalk_frame"></div></section></div></section><aside id="sidebar"><a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a><div class="sidebar-top"><p>关注我 :</p><ul class="social-links"><li><a class="social-tooltip" title="火星时代" href="http://edu.hxsd.com/edunew/topics/webfull/index.html" target="_blank"><i class="icon fa fa-dribbble"></i></a></li><li><a class="social-tooltip" title="weibo" href="#" target="_blank"><i class="icon fa fa-weibo"></i></a></li><li><a class="social-tooltip" title="rss" href="/atom.xml" target="_blank"><i class="icon fa fa-rss"></i></a></li></ul></div><div class="widgets-container"><link rel="stylesheet" href="/css/tech/technology.css"><div class="widget-wrap widget-list"><div class="widget"><dl class="technology"><dt><img src="/assets/images/tech/laravel.png"></dt><dd><p>Laravel</p><div class="notes"><a href="/tech/laravel/notes.html">教学讲义</a></div><div class="row"><div class="col-4 change_blue"><a href="/tech/laravel/case.html">3<br>案例</a></div><div class="col-4 plan"><a href="##">10<br>核心知识</a></div><div class="col-4 plan"><a href="##">10<br>文章</a></div></div><div class="row"><div class="col-6 plan"><a href="##">教学计划</a></div><div class="col-6"><a href="/tech/laravel/relative.html">相关资料</a></div></div></dd></dl></div></div><link rel="stylesheet" href="/css/tech/toc.css"><div class="widget-wrap widget-list widget-toc"><h3 class="widget-title">目录</h3><div class="widget"><div class="toc"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/3.0.5/tocbot.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/3.0.5/tocbot.min.js"></script><script>$(function(){$(".main-body-content").find("h1,h2,h3").each(function(t){$(this).attr("id")||$(this).attr("id","list"+t)}),tocbot.init({tocSelector:".toc",contentSelector:".main-body-content",headingSelector:"h1, h2, h3",collapseDepth:2,positionFixedSelector:".widget-toc",fixedSidebarOffset:595,includeHtml:!1})})</script></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">链接</h3><div class="widget"><ul><li><a href="http://edu.hxsd.com/edunew/topics/webfull/index.html">火星时代</a></li></ul></div></div></div></aside><script>$(function(){$(window).scroll(function(){240<=$(document).scrollTop()?($("#sidebar .sidebar-toggle").addClass("fix"),"block"==$("#sidebar .sidebar-toggle").css("display")&&$(".is-position-fixed").css("top","35px")):$("#sidebar .sidebar-toggle").removeClass("fix")})})</script></div></div></div><footer id="footer"><div class="top"><div class="inner"><div class="list"><div class="left clearfix"><dl><dt>关于我们</dt><dd><a href="/about.html">公司简介</a></dd><dd><a href="edu/index.html">联系我们</a></dd></dl><dl><dt>校区攻略</dt><dd><a href="edu/index.html">校区环境</a></dd><dd><a href="edu/index.html">住宿攻略</a></dd><dd><a href="edu/index.html">来校路线</a></dd></dl><dl><dt>课程培训</dt><dd><a href="edu/python.html">Web前端</a></dd><dd><a href="edu/python.html">Python</a></dd><dd><a href="edu/python.html">人工智能</a></dd><dd><a href="edu/python.html">大数据</a></dd></dl><dl><dt>常见问答</dt><dd><a href="edu/index.html">学费学时</a></dd><dd><a href="edu/index.html">学习方法</a></dd></dl></div></div><div class="tel"><img src="css/images/phone.png"><tel>176-0025-8815</tel><span>北京市海淀区杏石口路81号火星时代大厦</span></div><div class="weixin"><div class="w1"><img src="css/images/toutiao.jpeg"> <span>头条号</span></div><div class="w1"><img src="css/images/weixin.jpg"> <span>官方微信</span></div></div></div></div><div class="bot">Copyright 2018 技术学派 京ICP备15015508号-3</div></footer><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk=new Gitalk({clientID:"2fbbb9980b49019d99a7",clientSecret:"152dd10e83ef6595761ea2185304f9ac8263573f",repo:"jsxp",owner:"li-kang",admin:["li-kang"]});gitalk.render("gitalk_frame")</script><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="/js/main.js"></script></div></body>